__NUXT_JSONP__("/articles/mnussbaumer/722885", (function(a,b,c,d,e,f){c.type_of="article";c.id=722885;c.title="ImageEngine custom loaders for Next.js";c.description="This article will guide you through writing custom Next.js loaders, specifically for ImageEngine’s...";c.readable_publish_date="Jun 29";c.slug="image-engine-custom-loaders-for-next-js-2oe5";c.path="\u002Fmnussbaumer\u002Fimage-engine-custom-loaders-for-next-js-2oe5";c.url=d;c.comments_count=0;c.public_reactions_count=e;c.collection_id=a;c.published_timestamp=b;c.positive_reactions_count=e;c.cover_image=a;c.social_image="https:\u002F\u002Fdev.to\u002Fsocial_previews\u002Farticle\u002F722885.png";c.canonical_url=d;c.created_at="2021-06-09T11:41:03Z";c.edited_at="2021-06-30T12:04:56Z";c.crossposted_at=a;c.published_at=b;c.last_comment_at=b;c.reading_time_minutes=14;c.tag_list="imageengine, nextjs, vercel, loader";c.tags=["imageengine","nextjs","vercel","loader"];c.body_html="\u003Cp\u003EThis article will guide you through writing custom Next.js loaders, specifically for \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E’s distribution, but is applicable to any other situation where you need to customise the loaders. We’ll be building a grid layout image portfolio with the option to view the images in a full window lightbox. You can check the \u003Ca href=\"https:\u002F\u002Fie-custom-loader.vercel.app\"\u003Eapp we’ll be building here\u003C\u002Fa\u003E and the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmnussbaumer\u002Fie-nextjs-loader\"\u003Egithub repo\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"summary\" href=\"#summary\"\u003E\n  \u003C\u002Fa\u003E\n  Summary:\n\u003C\u002Fh3\u003E\n\n\u003Cul\u003E\n\u003Cli\u003EIntro\u003C\u002Fli\u003E\n\u003Cli\u003ECreating a \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E App\u003C\u002Fli\u003E\n\u003Cli\u003EDefining our Layout and Content\u003C\u002Fli\u003E\n\u003Cli\u003ESetting up \u003Ccode\u003ECustom Loaders\u003C\u002Fcode\u003E for use by our \u003Ccode\u003ENext.js Image\u003C\u002Fcode\u003E components\u003C\u002Fli\u003E\n\u003Cli\u003EDeploying on vercel.com\u003C\u002Fli\u003E\n\u003Cli\u003ECreate a distribution with \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E and set our vercel environment to use it\u003C\u002Fli\u003E\n\u003Cli\u003EConclusion\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"intro\" href=\"#intro\"\u003E\n  \u003C\u002Fa\u003E\n  Intro\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fimageengine.io\"\u003EImageEngine\u003C\u002Fa\u003E has custom image components for \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact\"\u003EReact\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Fvue\"\u003EVue\u003C\u002Fa\u003E, and in another post we went through \u003Ca href=\"https:\u002F\u002Fdev.to\u002Fmnussbaumer\u002Fimageengine-with-nextjs-1dh7\"\u003Ehow to use ImageEngine's custom image component\u003C\u002Fa\u003E in a \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003ENext.js\u003C\u002Fcode\u003E \u003Ccode\u003E&lt;Image\u002F&gt;\u003C\u002Fcode\u003E component is a pretty neat tool that is available in any \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E project you might start. It allows one to set up a system of breakpoints, sizes and settings to apply to our image assets. It takes care of preventing \u003Ca href=\"https:\u002F\u002Fweb.dev\u002Fcls\u002F\"\u003ECumulative Layout Shift\u003C\u002Fa\u003E on page rendering when provided with the correct size information and optimize our assets according to buckets of resolution\u002Fviewport\u002Fimage sizes. \u003C\u002Fp\u003E\n\n\u003Cp\u003EIt’s especially useful if you’re deploying on \u003Ca href=\"https:\u002F\u002Fvercel.com\"\u003EVercel\u003C\u002Fa\u003E as it will be automatically enabled and performant. It works by generating optimized assets in terms of dimensions, and then caching those resources for subsequent requests on their edge servers. This for many cases will be enough and offers a much better experience than unoptimized assets. \u003C\u002Fp\u003E\n\n\u003Cp\u003EOn the other hand, if you’re not running on \u003Ccode\u003EVercel\u003C\u002Fcode\u003E’s hosting, the performance of initial optimization is not as fast and can take a bit of time. If you’re not doing \u003Ccode\u003ESSR\u003C\u002Fcode\u003E and instead are deploying a static website build, as of now, you won’t be able to use their \u003Ccode\u003EImage\u003C\u002Fcode\u003E component at all.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIt also works better when the assets you’re serving all fall into horizontal\u002Fsquare ratios, as it uses \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E to determine the optimized images. So if you have a reasonable mix of vertical and horizontally oriented images then it will be much harder to serve the minimum needed sizes for those vertical images. \u003C\u002Fp\u003E\n\n\u003Cp\u003EIf you’re serving image content in very high quantities, even when using \u003Ccode\u003EVercel.com\u003C\u002Fcode\u003E then you might be interested in something that allows you to optimize your images up to the single pixel count, doesn’t rely on your server performance nor caching solutions, and offers very fast CDN distributions to deliver the best possible loading and viewing experience to your customers and users.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIn this post we’ll review how to setup such a project by designing two different components with two different loaders, one for square thumbnails and one for a full window lightbox. In the process we’ll see how to write a custom \u003Ccode\u003EImage\u003C\u002Fcode\u003E loader for \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E and some tricks for layout responsiveness.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"creating-a-raw-nextjs-endraw-app\" href=\"#creating-a-raw-nextjs-endraw-app\"\u003E\n  \u003C\u002Fa\u003E\n  Creating a \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E App\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003ETo follow through you'll need to have nodejs and npm installed. The versions used for this tutorial are npm 7.15.1 and node v16.3.0. We’ll also install the \u003Ca href=\"https:\u002F\u002Fvercel.com\u002Fcli\"\u003Evercel CLI\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EOn the folder where you'll be creating your project run:\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Enpx create-next-app\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003ENow let's install the \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact\"\u003EImageEngine Package\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Enpm i @imageengine\u002Freact\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EWe should be able to start our app by doing\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Enpm run dev\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EAnd visiting \u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Ehttp:\u002F\u002Flocalhost:3000\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EThis should show us the default page. Let's remove the default templating \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E page has and replace it with:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u002Fhead\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EHome\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Emain-container\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EImageEngine\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EOptimized\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ELightbox\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Ftitle\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Edescription\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003ENext.js custom image loaders leveraging ImageEngine CDN for highly optimized images\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elink\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Erel\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eicon\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Ffavicon.ico\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n         \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002FHead\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E  \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EAnd change \u003Ccode\u003E\u002Fpages\u002F_app.js\u003C\u002Fcode\u003E to the following\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u002Fhead\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E..\u002Fstyles\u002Fglobals.css\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EIECustomLoader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EComponent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EpageProps\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;&gt;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elink\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Erel\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eicon\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eimage\u002Fpng\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Ffavicon.png\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eviewport\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Einitial-scale=1.0\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Edescription\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003ELearn how to use ImageEngine with Nextjs custom loaders to serve highly optimised image assets from your CDN to your users.\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eproperty\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eog:title\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EImageEngine with NextJS\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eproperty\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eog:description\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003ELearn how to use ImageEngine with Nextjs custom loaders to serve highly optimised image assets from your CDN to your users.\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002FHead\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EComponent\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{...\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EpageProps\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"sr\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EIECustomLoader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ECreate a \u003Ccode\u003Enext.config.js\u003C\u002Fcode\u003E on the root of our project and inside it:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"nx\"\u003Emodule\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eexports\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003Eimages\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003EdeviceSizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1920\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1500\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E300\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003EimageSizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[]\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ELet's remove the things we don't need, delete \u003Ccode\u003Epages\u002Fapi\u003C\u002Fcode\u003E folder, \u003Ccode\u003Estyles\u002FHome.module.css\u003C\u002Fcode\u003E and \u003Ccode\u003Epublic\u002Fvercel.svg\u003C\u002Fcode\u003E::\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Erm -rf pages\u002Fapi\u003C\u002Fcode\u003E\u003Cbr\u003E\n\u003Ccode\u003Erm styles\u002FHome.module.css\u003C\u002Fcode\u003E\u003Cbr\u003E\n\u003Ccode\u003Erm public\u002Fvercel.svg\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003ECreate a folder at the root level named \u003Ccode\u003Ecomponents\u003C\u002Fcode\u003E, and inside the \u003Ccode\u003Epublic\u003C\u002Fcode\u003E folder create a \u003Ccode\u003Eie-loader-images\u003C\u002Fcode\u003E folder.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWe should now have the following structure:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight plaintext\"\u003E\u003Ccode\u003E...\npages \u002F\n  _app.js\n  index.js\n\nstyles \u002F\n  global.css\n\ncomponents \u002F \n\npublic \u002F\n  favicon.ico\n  ie-loader-images\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EYou’ll also need to download the files in \u003Ca href=\"https:\u002F\u002Fdev.togithublink\"\u003Epublic\u002Fie-loader-images\u003C\u002Fa\u003E and place them  in \u003Ccode\u003E\u002Fpublic\u002Fie-loader-images\u002F\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EFor this web page we’ll need 2 components, a \u003Ccode\u003Ethumbnail\u003C\u002Fcode\u003E component and a \u003Ccode\u003Elightbox\u003C\u002Fcode\u003E component. Both components will receive a \u003Ccode\u003Esrc\u003C\u002Fcode\u003E and \u003Ccode\u003Ealt\u003C\u002Fcode\u003E props for the image, an \u003Ccode\u003EonClick\u003C\u002Fcode\u003E function and the sizes of the \u003Ccode\u003Eviewport\u003C\u002Fcode\u003E. The \u003Ccode\u003Elightbox\u003C\u002Fcode\u003E component will additionally receive two functions for moving to the next and previous image.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe CSS is important but to save space it won’t be written here, you can copy it over from \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmnussbaumer\u002Fie-nextjs-loader\u002Fblob\u002Fmain\u002Fstyles\u002Fglobals.css\"\u003Eglobals.css\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EAs a side note, \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E \u003Ccode\u003EImage\u003C\u002Fcode\u003E component fixes the size of the image to prevent \u003Ccode\u003ECumulative Layout Shift\u003C\u002Fcode\u003E, but since we establish fixed size containers in CSS, that would have been addressed as well. The other interesting bit there is the small CSS trickery to get the \u003Ccode\u003Ehover\u003C\u002Fcode\u003E effect to display the labels without JS. The remaining is basic styling.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"thumbnail-component\" href=\"#thumbnail-component\"\u003E\n  \u003C\u002Fa\u003E\n  Thumbnail Component\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003ECreate a file \u003Ccode\u003Ecomponents\u002Fthumbnail.js\u003C\u002Fcode\u003E with:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EImage\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u002Fimage\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EconstructUrl\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E@imageengine\u002Freact\u002Fbuild\u002Futils\u002Findex.js\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EcreateRef\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ethumbnail_loader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edistribution\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eurl\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edistribution\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Edirectives\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Eheight\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003EfitMethod\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ecropbox\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Ecompression\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Esharpness\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E10\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EconstructUrl\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eurl\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edirectives\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EThumbnail\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ethumbnail_ref\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EcreateRef\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(),\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E),\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Einitial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_initial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edimensions\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ethumbnail_ref\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ecurrent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EgetBoundingClientRect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(),\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003En_width\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003EMath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eceil\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Edimensions\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\n        \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Einitial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_initial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003En_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Einitial_size\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&gt;=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003En_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Einitial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"nx\"\u003Eset_initial_size\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003En_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003Eset_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003En_width\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eimage-thumbnail\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ethumbnail_ref\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EImage\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Esizes\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`(max-width: 320px) 300px, (max-width: 500px) 500px, (max-width: 1000) 1000px, (max-width: 1500) 1500px, \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E${\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Epx`\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Elayout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eresponsive\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003EobjectFit\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ecover\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003EobjectPosition\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ecenter\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Eheight\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Eloader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eargs\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ethumbnail_loader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({...\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eargs\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Edistribution\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Eundefined\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n            \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E80\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F&gt; : nul\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003El\n\u003C\u002Fspan\u003E        \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eimage-details\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fp\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ELet’s go through the component part first. We receive 4 props \u003Ccode\u003EonClick, src, alt, window_sizes\u003C\u002Fcode\u003E. We create a \u003Ccode\u003EDOM ref\u003C\u002Fcode\u003E that we can use to get the actual HTML element of our wrapper, and we set two \u003Ccode\u003EuseState\u003C\u002Fcode\u003E’s, one to store the current width, and another the store the initial width. Most times these will be the same. \u003C\u002Fp\u003E\n\n\u003Cp\u003EThen we use \u003Ccode\u003EuseEffect\u003C\u002Fcode\u003E with a dependency on the value of \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E. Meaning this will run on mount once and then any time the prop \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E changes. Inside this hook if the \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E has a value, we use the \u003Ccode\u003Eref\u003C\u002Fcode\u003E for getting the wrapper component dimensions, we round the value, set the \u003Ccode\u003Einitial_size\u003C\u002Fcode\u003E if it’s not set yet, and, then, if the new width is bigger than the the \u003Ccode\u003Einitial_size\u003C\u002Fcode\u003E we set both \u003Ccode\u003Einitial\u003C\u002Fcode\u003E and \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E to this new size, and if not we keep the \u003Ccode\u003Einitial_size\u003C\u002Fcode\u003E and set it as our \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E value. \u003C\u002Fp\u003E\n\n\u003Cp\u003EThe reason we do this is because if we have already fetched an image with bigger dimensions than the new size there’s no point in fetching the smaller one, since the bigger one can be displayed just as correctly and has more quality. On the other hand, if the window resize resulted in a thumbnail that is bigger than initially, we want to fetch a bigger image to keep the quality at a higher size. We’ll also replace the initial whenever that’s the case, so that resizing smaller and back into bigger won’t retrigger a new image.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThen our component itself is a wrapper with a property of \u003Ccode\u003EonClick\u003C\u002Fcode\u003E set to the handler passed down as a prop (that will open the \u003Ccode\u003Elightbox\u003C\u002Fcode\u003E) and the \u003Ccode\u003Eref\u003C\u002Fcode\u003E we created, so that we can use the \u003Ccode\u003Eref\u003C\u002Fcode\u003E to get the wrapper width.\u003C\u002Fp\u003E\n\n\u003Cp\u003EInside the wrapper we have the \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E \u003Ccode\u003EImage\u003C\u002Fcode\u003E component, and we set \u003Ccode\u003Esrc\u003C\u002Fcode\u003E, \u003Ccode\u003Ealt\u003C\u002Fcode\u003E, \u003Ccode\u003Esizes\u003C\u002Fcode\u003E (for the breakpoints), \u003Ccode\u003Elayout\u003C\u002Fcode\u003E as responsive (so that it fetches new images if the width and sizes change), \u003Ccode\u003EobjectFit\u003C\u002Fcode\u003E and \u003Ccode\u003EobjectPosition\u003C\u002Fcode\u003E so that it forces the image to be displayed covering the full “square” and centered, \u003Ccode\u003Equality\u003C\u002Fcode\u003E, and in case there’s an environment variable \u003Ccode\u003EDISTRIBUTION\u003C\u002Fcode\u003E set, we use the specific loader, an anonymous function that calls the \u003Ccode\u003Ethumbnails_loader\u003C\u002Fcode\u003E we defined at the top of the file with an additional argument, the\u003Ccode\u003Edistribution\u003C\u002Fcode\u003E url, otherwise we set it as null so the default one will be used.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWhen \u003Ccode\u003EDISTRIBUTION\u003C\u002Fcode\u003E is set that loader will be used to provide the actual \u003Ccode\u003Eurl\u003C\u002Fcode\u003E the \u003Ccode\u003EImage\u003C\u002Fcode\u003E component will use. By default the loader has access to 3 params provided by \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E, the original \u003Ccode\u003Esrc\u003C\u002Fcode\u003E, \u003Ccode\u003Equality\u003C\u002Fcode\u003E value and \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E. In this case since it’s a square image, the \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E is enough, but we still need the \u003Ccode\u003Edistribution\u003C\u002Fcode\u003E url, so that we can generate the right source for our image.\u003C\u002Fp\u003E\n\n\u003Cp\u003EBy using the \u003Ccode\u003EconstructUrl\u003C\u002Fcode\u003E provided by \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact\"\u003E@imageengine\u002Freact\u003C\u002Fa\u003E we can pass an object with properties that dictate how the CDN will provide the images. Here we pass \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E, \u003Ccode\u003Eheight\u003C\u002Fcode\u003E, \u003Ccode\u003EfitMethod\u003C\u002Fcode\u003E, \u003Ccode\u003Ecompression\u003C\u002Fcode\u003E (it’s the inverse scale from the quality) and \u003Ccode\u003Esharpness\u003C\u002Fcode\u003E to apply a small amount of sharpness to the final image.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Cstrong\u003Enote\u003C\u002Fstrong\u003E as of now, \u003Ccode\u003EconstructUrl\u003C\u002Fcode\u003E isn’t directly exported by the package - which means that although probably unlikely, it’s place in the lib might change - nonetheless it will probably be made public in a future release, but otherwise, you can always either copy the specific logic for it, or use \u003Ca href=\"https:\u002F\u002Fsupport.imageengine.io\u002Fhc\u002Fen-us\u002Farticles\u002F360058880672-directives\"\u003Edirectives\u003C\u002Fa\u003E directly and build your own url.\u003C\u002Fp\u003E\n\n\u003Cp\u003ENotice that this will generate the same url for all \u003Ccode\u003Esrcset sizes\u003C\u002Fcode\u003E entries, and that is fine since the url codifies the needed settings itself, but when using \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E we don’t really need to rely on \u003Ccode\u003Esrcset\u003C\u002Fcode\u003E since we can generate exactly the sizes we want on-the-fly.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"lightbox-component\" href=\"#lightbox-component\"\u003E\n  \u003C\u002Fa\u003E\n  Lightbox Component\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003ENow let's move to the \u003Ccode\u003Elightbox\u003C\u002Fcode\u003Ecomponent, create the file \u003Ccode\u003Ecomponents\u002Flightbox.js\u003C\u002Fcode\u003E:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EImage\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u002Fimage\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EconstructUrl\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E@imageengine\u002Freact\u002Fbuild\u002Futils\u002Findex.js\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Elightbox_loader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edistribution\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eh\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eurl\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edistribution\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Edirectives\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Eheight\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eh\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003EfitMethod\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ebox\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Ecompression\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EconstructUrl\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eurl\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edirectives\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ELighbox\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprevious\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Enext\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Elightbox\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eprevious\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eprevious\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eimage-lightbox\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EImage\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Esizes\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`(max-width: 320px) 300px, (max-width: 500px) 500px, (max-width: 1000) 1000px, (max-width: 1500) 1500px, \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E${\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Epx`\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003EobjectFit\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Econtain\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003EobjectPosition\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ecenter\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Eheight\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eh\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n                  \u003Cspan class=\"nx\"\u003Eloader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eargs\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Elightbox_loader\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({...\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eargs\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E...\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Edistribution\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eenv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDISTRIBUTION\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Eundefined\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n          \u003Cspan class=\"nx\"\u003Equality\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E90\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n          \u003Cspan class=\"sr\"\u003E\u002F&gt;  : null\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E}\n\u003C\u002Fspan\u003E      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EYou’ll notice that this is very similar to the thumbnail  component, but that we use instead the \u003Ccode\u003Ew\u003C\u002Fcode\u003E and \u003Ccode\u003Eh\u003C\u002Fcode\u003E values directly from the \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E prop, and we use a different \u003Ccode\u003EobjectFit\u003C\u002Fcode\u003E and \u003Ccode\u003Equality\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe reason we pass \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E and \u003Ccode\u003Eheight\u003C\u002Fcode\u003E to our loader is that since we want the image to fit the viewport, with both those values and the \u003Ccode\u003Ebox\u003C\u002Fcode\u003E fit, \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E will be able to generate perfectly sized images for them, especially when they’re vertical.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIn the intro I mentioned that cases where the image orientation is not horizontal, that \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E can provide better optimisations and the reason is related to how the \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E \u003Ccode\u003EImage\u003C\u002Fcode\u003E component works. \u003C\u002Fp\u003E\n\n\u003Cp\u003EWhen we set \u003Ccode\u003EdeviceSizes: [1920, 1500, 1000, 500, 300]\u003C\u002Fcode\u003E on our \u003Ccode\u003Enext.config.js\u003C\u002Fcode\u003E what we’re saying is, we’ll have 5 buckets of width sizes we want to allow. By using the \u003Ccode\u003Esizes\u003C\u002Fcode\u003E property on the \u003Ccode\u003EImage\u003C\u002Fcode\u003E component we can make it so that given a certain \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E the browser will try to match it with the smallest possible \u003Ccode\u003Esrcset\u003C\u002Fcode\u003E that covers that \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E. For horizontal or square images this works fine, as there’s a direct match between the max width and the bucket. But when the image is vertical, this no longer matches neatly. So if you open the lightbox with a vertical image and the viewport size is \u003Ccode\u003E1800px\u003C\u002Fcode\u003E wide, but only \u003Ccode\u003E750px\u003C\u002Fcode\u003E high, the image that will be retrieved will be the one matching the \u003Ccode\u003E1920\u003C\u002Fcode\u003E entry. This is actually a bigger image since it’s vertical, it’s width to match \u003Ccode\u003E1920\u003C\u002Fcode\u003E will make it quite bigger than it needs to be. \u003C\u002Fp\u003E\n\n\u003Cp\u003EWhen using \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E, in the same situation, with a \u003Ca href=\"https:\u002F\u002Fsupport.imageengine.io\u002Fhc\u002Fen-us\u002Farticles\u002F360058880672-Directives\"\u003EfitMethod of box\u003C\u002Fa\u003E, \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E’s engine will actually be smart enough to see that the image needs to be \u003Ccode\u003E750px\u003C\u002Fcode\u003E high at most, and will resize it by that axis. So the result might be a \u003Ccode\u003E400px X 750px\u003C\u002Fcode\u003E image, instead of \u003Ccode\u003E1920px X 3000px\u003C\u002Fcode\u003E for instance. \u003C\u002Fp\u003E\n\n\u003Cp\u003EIf we had exact information for both width and height of the actual images, we could try to work around that limitation of the \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E optimizer, by doing ourselves the calculations of what width would correspond to that maximum height - but since this isn’t normally available we usually can’t. Plus, that would need to change whenever we had changes on layout, styling, or on the source images.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWith \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E we don’t need to worry about that, since it’s always going to be the perfect fit for the dimensions we give it. Plus, in the case of the thumbnails, if we changed the size of the wrappers in CSS, it would still work automatically, whereas with the default \u003Ccode\u003EImage\u003C\u002Fcode\u003E component we might need to change our \u003Ccode\u003EdeviceSizes\u003C\u002Fcode\u003E or do small adjustments. We could even make the \u003Ccode\u003Ethumbnail\u003C\u002Fcode\u003E element be completely future proof if instead of providing only the \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E (as it was a square) we also provided the \u003Ccode\u003Eheight\u003C\u002Fcode\u003E of the wrapper, so that even if we changed the styling to a different ratio it would still work correctly. Since it’s a demo, we’re using only one side but there’s no reason to not use both as we already have the DOM element from which we can extract the height as well.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe last part is to define our main \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"indexjs-entry-point\" href=\"#indexjs-entry-point\"\u003E\n  \u003C\u002Fa\u003E\n  index.js entry point\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003ELet’s replace the contents of \u003Ccode\u003Epages\u002Findex.js\u003C\u002Fcode\u003E:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u002Fhead\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EThumbnail\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E..\u002Fcomponents\u002Fthumbnail.js\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ELightbox\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E..\u002Fcomponents\u002Flightbox.js\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-1.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EHarvested field with hay bales - Alentejo, Portugal © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-2.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EFamily cycling and skating in abandoned Tempelhof Airport lane - Berlin, Germany © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-8.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EGroup of hindu and muslim kids posing for a photo - New Delhi, India © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fv-lightbox-4.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EBuddhist Monk Portrait with a statue of the buddhist mythological Seven Headed Naga  serving as background - Siem Reap, Cambodia © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-5.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003ETraditional Nepalase Hindu Temple in one of the many lively city squares of Kathmandu, Nepal © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fv-lightbox-6.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EWoman in traditional Nepalese clothing sitting in a valley in Pokhara, Nepal © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-7.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EGeometric pattern on a ceiling inside the Red Fort - New Delhi, India © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-3.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EKids silhuetes in the sea near-shore close to sunset - Phu Quoc Island, Vietnam © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fie-loader-images\u002Fh-lightbox-9.jpeg\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EPortrait of four man sitting during a pause in their badminton game - Hanoi, Vietnam © Micael Nussbaumer\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E\n\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EHome\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_window_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eresize_timer\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eget_window_sizes\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edoc\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EdocumentElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ew\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edoc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientWidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Eh\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Edoc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientHeight\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprevious\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eevt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eevt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EstopPropagation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elength\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Enext\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eevt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eevt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EstopPropagation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elength\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_timing\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresize_timer\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclearTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresize_timer\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eresize_timer\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E  \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003Eset_window_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eget_window_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E());\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003Eresize_timer\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E2000\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eresize\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_timing\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eset_window_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eget_window_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E());\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EremoveEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eresize\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_timing\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[]);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`main-container \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E${\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E||\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eno-overflow\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EHead\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EImageEngine\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EOptimized\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ELightbox\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Ftitle\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emeta\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Edescription\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003ENext.js custom image loaders leveraging ImageEngine CDN for highly optimized images\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elink\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Erel\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Eicon\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Ffavicon.ico\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002FHead\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(([\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EThumbnail\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ekey\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`image-thumb-\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E${\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003E_evt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F&gt; \u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E;\n\u003C\u002Fspan\u003E          \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n          \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fmain\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E      \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E||\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ELightbox\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E][\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EIMAGES\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eopened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E][\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EonClick\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003E_evt\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eset_opened\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewindow_sizes\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eprevious\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eprevious\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002F&gt; : null\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E}\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Efooter\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ehttps:\u002F\u002Fimageengine.io\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E_blank\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EImageEngine\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fa\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ehttps:\u002F\u002Fmicaelnussbaumer.com\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E_blank\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E©\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EMicael\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ENussbaumer\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E2021\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fa\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E\n          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ehttps:\u002F\u002Fnextjs.org\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E_blank\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ENext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ejs\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fa\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E          \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ehttps:\u002F\u002Fvercel.com\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E_blank\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EVercel\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fa\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Ffooter\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EIn our \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E file we define an \u003Ccode\u003EIMAGES\u003C\u002Fcode\u003E array, that contains the images we’ll show. The contents are mostly straightforward. We use \u003Ccode\u003EuseState\u003C\u002Fcode\u003E to set both the window size and if the lightbox is open. We define functions for getting the window size, for moving forward and backwards across the images, and to control any possible resizing of the viewport.\u003C\u002Fp\u003E\n\n\u003Cp\u003EOn first mount, we \u003Ccode\u003EuseEffect\u003C\u002Fcode\u003E to set a listener on the \u003Ccode\u003Ewindow resize\u003C\u002Fcode\u003E event and we set the original window sizes. Although we only have one page in our \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E app, we also set a cleanup function on the \u003Ccode\u003EuseEffect\u003C\u002Fcode\u003E by returning an anonymous function to remove the \u003Ccode\u003EeventListener\u003C\u002Fcode\u003E we added previously. This is just good form, because if you’re using React as a SPA with multiple pages and you don’t clean-up your useEffects, you might end with memory-leaks or multiple listeners being triggered (and most likely throwing exceptions since what they’ll be referring to won’t be around anymore).\u003C\u002Fp\u003E\n\n\u003Cp\u003ERegarding the \u003Ccode\u003Eresize\u003C\u002Fcode\u003E event we use a \u003Ccode\u003EsetTimeout\u003C\u002Fcode\u003E and a control variable \u003Ccode\u003Eresize_timer\u003C\u002Fcode\u003E. This is so that we don’t trigger multiple \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E changes - as that would trickle down to our components and trigger multiple fetches for different image sources as the dimensions changed, for instance if resizing the window on a desktop manually. At the same time, listening to resize events and updating the \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E takes care of refetching the correct size in case a user is seeing the website on a mobile and changes the display from vertical to horizontal for instance. \u003C\u002Fp\u003E\n\n\u003Cp\u003EThe \u003Ccode\u003EJSX\u003C\u002Fcode\u003E contents are pretty regular, we map our \u003Ccode\u003EIMAGES\u003C\u002Fcode\u003E array into \u003Ccode\u003EThumbnail\u003C\u002Fcode\u003E’s components passing \u003Ccode\u003Esrc\u003C\u002Fcode\u003E, \u003Ccode\u003Ealt\u003C\u002Fcode\u003E, \u003Ccode\u003Ewindow_sizes\u003C\u002Fcode\u003E and a \u003Ccode\u003EonClick\u003C\u002Fcode\u003E handle.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThen when clicking one of the thumbnails, the \u003Ccode\u003Eopened\u003C\u002Fcode\u003E state is updated to the index of that image in our array and we use that to both display our \u003Ccode\u003ELightbox\u003C\u002Fcode\u003E component and to read the correct data for our image. On the \u003Ccode\u003ELightbox\u003C\u002Fcode\u003E we pass the same props plus the \u003Ccode\u003Eprevious\u003C\u002Fcode\u003E and \u003Ccode\u003Enext\u003C\u002Fcode\u003E functions.\u003Cbr\u003E\nLastly we have a few \u003Ccode\u003Efooter\u003C\u002Fcode\u003E items.\u003Cbr\u003E\nAnd that’s it.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"setting-up-imageengine\" href=\"#setting-up-imageengine\"\u003E\n  \u003C\u002Fa\u003E\n  Setting up ImageEngine\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EWith this we can already host our page in \u003Ccode\u003Evercel\u003C\u002Fcode\u003E, by using their CLI from our project’s root folder executing:\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Evercel\u003C\u002Fcode\u003E \u003C\u002Fp\u003E\n\n\u003Cp\u003EAnd setting up the project settings, followed by:\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Evercel --prod\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003E...to deploy. \u003C\u002Fp\u003E\n\n\u003Cp\u003EYou’ll now be able to see the website online. Take note of your production server url.\u003Cbr\u003E\nOnce that is done it’s time to setup the \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E distribution.\u003C\u002Fp\u003E\n\n\u003Cp\u003EYou can follow this video on how to easily signup for a trial\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ciframe src=\"https:\u002F\u002Fplayer.vimeo.com\u002Fvideo\u002F552953993\" width=\"710\" height=\"399\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen loading=\"lazy\"\u003E\n\u003C\u002Fiframe\u003E\n\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fimageengine.io\"\u003Eimageengine.io\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EAfter following those steps, take note of the delivery address, because we'll use it when building our project. We can do it through the \u003Ccode\u003EVercel\u003C\u002Fcode\u003E dashboard for our project, or through the \u003Ccode\u003ECLI\u003C\u002Fcode\u003E when deploying:\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ccode\u003Evercel --build-env DISTRIBUTION=”https:\u002F\u002Four_ie_address.imgeng.in” --prod\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EWith that, our custom loaders will be enabled, and if we visit our website and inspect the HTML source we should see that it’s now using our \u003Ccode\u003EImageEngine\u003C\u002Fcode\u003E distribution for the images!\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"conclusion\" href=\"#conclusion\"\u003E\n  \u003C\u002Fa\u003E\n  Conclusion\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EWhile \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E’s \u003Ccode\u003EImage\u003C\u002Fcode\u003E component along with \u003Ccode\u003Evercel\u003C\u002Fcode\u003E’s automated infrastructure is really a great improvement over using non-optimized assets and will work well for many types of websites, there’s a few cases where \u003Cstrong\u003EImageEngine is a better option overall\u003C\u002Fstrong\u003E. \u003C\u002Fp\u003E\n\n\u003Cp\u003EThose include websites with very high traffic and image content. The more targeted, and almost pixel precise, sizes it allows one to deliver, can lower significantly the sizes of images being transferred. Websites with mixed orientation content in any significant quantity also benefit widely from it. \u003C\u002Fp\u003E\n\n\u003Cp\u003EAnother situation is, if you’re using \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E but not deploying on \u003Ccode\u003Evercel\u003C\u002Fcode\u003E then you’ll probably want to use it too - the \u003Ccode\u003EImage\u003C\u002Fcode\u003E component works the best possible in \u003Ccode\u003Evercel\u003C\u002Fcode\u003E as its infrastructure is prepared to handle it specifically (they’re the authors of \u003Ccode\u003ENext.js\u003C\u002Fcode\u003E) but if you’re deploying on your own server then it’s a different matter and having it stored, prepared and cached over a very fast external CDN will help you achieve the best performance for your website. \u003C\u002Fp\u003E\n\n\u003Cp\u003ELastly, as we saw, by taking some measures when writing the logic for the loader, we can make it so that our components are automatically able to handle changes in layout, styling or structure without any tweaking or re-doing of the app settings or components logic while keeping the exact needed sizes for any dimensions we decide to use. This is important as it removes one friction point when contemplating a re-styling of the whole or parts of the app.\u003C\u002Fp\u003E\n\n";c.body_markdown="\nThis article will guide you through writing custom Next.js loaders, specifically for `ImageEngine`’s distribution, but is applicable to any other situation where you need to customise the loaders. We’ll be building a grid layout image portfolio with the option to view the images in a full window lightbox. You can check the [app we’ll be building here](https:\u002F\u002Fie-custom-loader.vercel.app) and the [github repo](https:\u002F\u002Fgithub.com\u002Fmnussbaumer\u002Fie-nextjs-loader).\n\n### Summary:\n- Intro\n- Creating a `Next.js` App\n- Defining our Layout and Content\n- Setting up `Custom Loaders` for use by our `Next.js Image` components\n- Deploying on vercel.com\n- Create a distribution with `ImageEngine` and set our vercel environment to use it\n- Conclusion\n\n\n###Intro\n\n[ImageEngine](https:\u002F\u002Fimageengine.io) has custom image components for [React](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact) and [Vue](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Fvue), and in another post we went through [how to use ImageEngine's custom image component](https:\u002F\u002Fdev.to\u002Fmnussbaumer\u002Fimageengine-with-nextjs-1dh7) in a `Next.js`.\n\n`Next.js` `\u003CImage\u002F\u003E` component is a pretty neat tool that is available in any `Next.js` project you might start. It allows one to set up a system of breakpoints, sizes and settings to apply to our image assets. It takes care of preventing [Cumulative Layout Shift](https:\u002F\u002Fweb.dev\u002Fcls\u002F) on page rendering when provided with the correct size information and optimize our assets according to buckets of resolution\u002Fviewport\u002Fimage sizes. \n\nIt’s especially useful if you’re deploying on [Vercel](https:\u002F\u002Fvercel.com) as it will be automatically enabled and performant. It works by generating optimized assets in terms of dimensions, and then caching those resources for subsequent requests on their edge servers. This for many cases will be enough and offers a much better experience than unoptimized assets. \n\nOn the other hand, if you’re not running on `Vercel`’s hosting, the performance of initial optimization is not as fast and can take a bit of time. If you’re not doing `SSR` and instead are deploying a static website build, as of now, you won’t be able to use their `Image` component at all.\n\nIt also works better when the assets you’re serving all fall into horizontal\u002Fsquare ratios, as it uses `width` to determine the optimized images. So if you have a reasonable mix of vertical and horizontally oriented images then it will be much harder to serve the minimum needed sizes for those vertical images. \n\nIf you’re serving image content in very high quantities, even when using `Vercel.com` then you might be interested in something that allows you to optimize your images up to the single pixel count, doesn’t rely on your server performance nor caching solutions, and offers very fast CDN distributions to deliver the best possible loading and viewing experience to your customers and users.\n\nIn this post we’ll review how to setup such a project by designing two different components with two different loaders, one for square thumbnails and one for a full window lightbox. In the process we’ll see how to write a custom `Image` loader for `Next.js` and some tricks for layout responsiveness.\n\n\n###Creating a `Next.js` App\n\nTo follow through you'll need to have nodejs and npm installed. The versions used for this tutorial are npm 7.15.1 and node v16.3.0. We’ll also install the [vercel CLI](https:\u002F\u002Fvercel.com\u002Fcli).\n\nOn the folder where you'll be creating your project run:\n\n`npx create-next-app`\n\nNow let's install the [ImageEngine Package](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact):\n\n`npm i @imageengine\u002Freact`\n\nWe should be able to start our app by doing\n\n`npm run dev`\n\nAnd visiting \n\n`http:\u002F\u002Flocalhost:3000`\n\nThis should show us the default page. Let's remove the default templating `index.js` page has and replace it with:\n\n\n```js\nimport Head from \"next\u002Fhead\";\n\nexport default function Home() {\n  return (\n\n      \u003Cdiv className=\"main-container\"\u003E\n        \u003CHead\u003E\n            \u003Ctitle\u003EImageEngine Optimized Lightbox\u003C\u002Ftitle\u003E\n            \u003Cmeta name=\"description\" content=\"Next.js custom image loaders leveraging ImageEngine CDN for highly optimized images\" \u002F\u003E\n            \u003Clink rel=\"icon\" href=\"\u002Ffavicon.ico\" \u002F\u003E\n         \u003C\u002FHead\u003E\n      \u003C\u002Fdiv\u003E\n  );\n};\n```\n\nAnd change `\u002Fpages\u002F_app.js` to the following\n\n```js\nimport Head from \"next\u002Fhead\";\nimport \"..\u002Fstyles\u002Fglobals.css\";\n\nfunction IECustomLoader({ Component, pageProps }) {\n\n    return (\n\t    \u003C\u003E\n\t      \u003CHead\u003E\n\t\t\u003Clink rel=\"icon\" type=\"image\u002Fpng\" href=\"\u002Ffavicon.png\"\u002F\u003E\n\t\t\u003Cmeta name=\"viewport\" content=\"initial-scale=1.0\" \u002F\u003E\n\t\t\u003Cmeta name=\"description\" content=\"Learn how to use ImageEngine with Nextjs custom loaders to serve highly optimised image assets from your CDN to your users.\" \u002F\u003E\n\t\t\u003Cmeta property=\"og:title\" content=\"ImageEngine with NextJS\" \u002F\u003E\n\t\t\u003Cmeta property=\"og:description\" content=\"Learn how to use ImageEngine with Nextjs custom loaders to serve highly optimised image assets from your CDN to your users.\" \u002F\u003E\n\t      \u003C\u002FHead\u003E\n\t      \u003CComponent {...pageProps} \u002F\u003E\n\t    \u003C\u002F\u003E\n    );\n};\n\nexport default IECustomLoader;\n```\n\nCreate a `next.config.js` on the root of our project and inside it:\n\n```js\nmodule.exports = {\n    env: {\n\tDISTRIBUTION: process.env.DISTRIBUTION\n    },\n    images: {\n\tdeviceSizes: [1920, 1500, 1000, 500, 300],\n\timageSizes: []\n    }\n};\n```\n\nLet's remove the things we don't need, delete `pages\u002Fapi` folder, `styles\u002FHome.module.css` and `public\u002Fvercel.svg`::\n\n`rm -rf pages\u002Fapi`\n`rm styles\u002FHome.module.css`\n`rm public\u002Fvercel.svg`\n\nCreate a folder at the root level named `components`, and inside the `public` folder create a `ie-loader-images` folder.\n\nWe should now have the following structure:\n\n```\n...\npages \u002F\n  _app.js\n  index.js\n\nstyles \u002F\n  global.css\n\ncomponents \u002F \n\npublic \u002F\n  favicon.ico\n  ie-loader-images\n```\n\nYou’ll also need to download the files in [public\u002Fie-loader-images](githublink) and place them  in `\u002Fpublic\u002Fie-loader-images\u002F`.\n\nFor this web page we’ll need 2 components, a `thumbnail` component and a `lightbox` component. Both components will receive a `src` and `alt` props for the image, an `onClick` function and the sizes of the `viewport`. The `lightbox` component will additionally receive two functions for moving to the next and previous image.\n\nThe CSS is important but to save space it won’t be written here, you can copy it over from [globals.css](https:\u002F\u002Fgithub.com\u002Fmnussbaumer\u002Fie-nextjs-loader\u002Fblob\u002Fmain\u002Fstyles\u002Fglobals.css).\n\nAs a side note, `Next.js` `Image` component fixes the size of the image to prevent `Cumulative Layout Shift`, but since we establish fixed size containers in CSS, that would have been addressed as well. The other interesting bit there is the small CSS trickery to get the `hover` effect to display the labels without JS. The remaining is basic styling.\n\n###Thumbnail Component\n\nCreate a file `components\u002Fthumbnail.js` with:\n\n```js\nimport Image from \"next\u002Fimage\";\nimport { constructUrl } from \"@imageengine\u002Freact\u002Fbuild\u002Futils\u002Findex.js\";\n\nimport { useState, useEffect, createRef } from \"react\";\n\nfunction thumbnail_loader({ src, quality, distribution, width }) {\n    let url = distribution + src,\n\tdirectives = {\n\t    width: width,\n\t    height: width,\n\t    fitMethod: \"cropbox\",\n\t    compression: 100 - quality,\n\t    sharpness: 10\n\t};\n    \n    return constructUrl(url, directives);\n};\n\nexport default function Thumbnail({ onClick, src, alt, window_sizes }) {\n\n    let thumbnail_ref = createRef(),\n\t[width, set_width] = useState(null),\n\t[initial_size, set_initial_size] = useState(null);\n\n    useEffect(() =\u003E {\n\tif (window_sizes) {\n\t    \n\t    let dimensions = thumbnail_ref.current.getBoundingClientRect(),\n\t\tn_width = Math.ceil(dimensions.width);\n\n\t    \n\t    if (!initial_size) { set_initial_size(n_width); }\n\n\t    if (initial_size \u003E= n_width) { set_width(initial_size); }\n\t    else {\n\t\t\n\t\tset_initial_size(n_width);\n\t\tset_width(n_width);\n\t\t\n\t    }\n\t}\n    }, [window_sizes]);\n    \n    return (\n\t\u003Cdiv className=\"image-thumbnail\" onClick={onClick} ref={thumbnail_ref}\u003E\n\t  {width ?\n\t      \u003CImage\n\t\t    src={src}\n\t\t    alt={alt}\n\t\t    sizes={`(max-width: 320px) 300px, (max-width: 500px) 500px, (max-width: 1000) 1000px, (max-width: 1500) 1500px, ${width}px`}\n\t\t    layout=\"responsive\"\n\t\t    objectFit=\"cover\"\n\t\t    objectPosition=\"center\"\n\t\t    width={width}\n\t\t    height={width}\n\t\t    loader={process.env.DISTRIBUTION ? (args) =\u003E thumbnail_loader({...args, distribution: process.env.DISTRIBUTION}) : undefined}\n\t\t    quality={80}\u002F\u003E : null\n\t\t}\n\t\t\u003Cdiv className=\"image-details\"\u003E\n\t\t  \u003Cp\u003E{alt}\u003C\u002Fp\u003E\n\t\t\u003C\u002Fdiv\u003E\n\t\u003C\u002Fdiv\u003E\n    );\n};\n```\n\nLet’s go through the component part first. We receive 4 props `onClick, src, alt, window_sizes`. We create a `DOM ref` that we can use to get the actual HTML element of our wrapper, and we set two `useState`’s, one to store the current width, and another the store the initial width. Most times these will be the same. \n\nThen we use `useEffect` with a dependency on the value of `window_sizes`. Meaning this will run on mount once and then any time the prop `window_sizes` changes. Inside this hook if the `window_sizes` has a value, we use the `ref` for getting the wrapper component dimensions, we round the value, set the `initial_size` if it’s not set yet, and, then, if the new width is bigger than the the `initial_size` we set both `initial` and `width` to this new size, and if not we keep the `initial_size` and set it as our `width` value. \n\nThe reason we do this is because if we have already fetched an image with bigger dimensions than the new size there’s no point in fetching the smaller one, since the bigger one can be displayed just as correctly and has more quality. On the other hand, if the window resize resulted in a thumbnail that is bigger than initially, we want to fetch a bigger image to keep the quality at a higher size. We’ll also replace the initial whenever that’s the case, so that resizing smaller and back into bigger won’t retrigger a new image.\n\nThen our component itself is a wrapper with a property of `onClick` set to the handler passed down as a prop (that will open the `lightbox`) and the `ref` we created, so that we can use the `ref` to get the wrapper width.\n\nInside the wrapper we have the `Next.js` `Image` component, and we set `src`, `alt`, `sizes` (for the breakpoints), `layout` as responsive (so that it fetches new images if the width and sizes change), `objectFit` and `objectPosition` so that it forces the image to be displayed covering the full “square” and centered, `quality`, and in case there’s an environment variable `DISTRIBUTION` set, we use the specific loader, an anonymous function that calls the `thumbnails_loader` we defined at the top of the file with an additional argument, the`distribution` url, otherwise we set it as null so the default one will be used.\n\nWhen `DISTRIBUTION` is set that loader will be used to provide the actual `url` the `Image` component will use. By default the loader has access to 3 params provided by `Next.js`, the original `src`, `quality` value and `width`. In this case since it’s a square image, the `width` is enough, but we still need the `distribution` url, so that we can generate the right source for our image.\n\nBy using the `constructUrl` provided by [@imageengine\u002Freact](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@imageengine\u002Freact) we can pass an object with properties that dictate how the CDN will provide the images. Here we pass `width`, `height`, `fitMethod`, `compression` (it’s the inverse scale from the quality) and `sharpness` to apply a small amount of sharpness to the final image.\n\n**note** as of now, `constructUrl` isn’t directly exported by the package - which means that although probably unlikely, it’s place in the lib might change - nonetheless it will probably be made public in a future release, but otherwise, you can always either copy the specific logic for it, or use [directives](https:\u002F\u002Fsupport.imageengine.io\u002Fhc\u002Fen-us\u002Farticles\u002F360058880672-directives) directly and build your own url.\n\nNotice that this will generate the same url for all `srcset sizes` entries, and that is fine since the url codifies the needed settings itself, but when using `ImageEngine` we don’t really need to rely on `srcset` since we can generate exactly the sizes we want on-the-fly.\n\n###Lightbox Component\n\nNow let's move to the `lightbox`component, create the file `components\u002Flightbox.js`:\n\n\n```js\nimport Image from \"next\u002Fimage\";\nimport { constructUrl } from \"@imageengine\u002Freact\u002Fbuild\u002Futils\u002Findex.js\";\n\nfunction lightbox_loader({ src, quality, distribution, w, h }) {\n    let url = distribution + src,\n\tdirectives = {\n\t    width: w,\n\t    height: h,\n\t    fitMethod: \"box\",\n\t    compression: 100 - quality\n\t};\n    \n    return constructUrl(url, directives);\n};\n\nexport default function Lighbox({ onClick, src, alt, window_sizes, previous, next }) {\n\n    return (\n\t\u003Cdiv className=\"lightbox\" onClick={onClick}\u003E\n\t  \u003Cbutton className=\"previous\" onClick={previous}\u002F\u003E\n\t  \u003Cdiv className=\"image-lightbox\"\u003E\n\t    {window_sizes ? \u003CImage\n\t\t\t\t  src={src}\n\t\t\t\t  alt={alt}\n\t\t\t\t  sizes={`(max-width: 320px) 300px, (max-width: 500px) 500px, (max-width: 1000) 1000px, (max-width: 1500) 1500px, ${window_sizes.w}px`}\n\t\t\t\t  objectFit=\"contain\"\n\t\t\t\t  objectPosition=\"center\"\n\t\t\t\t  width={window_sizes.w}\n\t\t\t\t  height={window_sizes.h}\n\t\t\t\t  loader={process.env.DISTRIBUTION ? (args) =\u003E lightbox_loader({...args, ...window_sizes, distribution: process.env.DISTRIBUTION}) : undefined}\n\t\t  quality={90}\n\t      \u002F\u003E  : null}\n\t  \u003C\u002Fdiv\u003E\n\t  \u003Cbutton className=\"next\" onClick={next}\u002F\u003E\n\t\u003C\u002Fdiv\u003E\n    );\n};\n```\n\nYou’ll notice that this is very similar to the thumbnail  component, but that we use instead the `w` and `h` values directly from the `window_sizes` prop, and we use a different `objectFit` and `quality`.\n\nThe reason we pass `width` and `height` to our loader is that since we want the image to fit the viewport, with both those values and the `box` fit, `ImageEngine` will be able to generate perfectly sized images for them, especially when they’re vertical.\n\nIn the intro I mentioned that cases where the image orientation is not horizontal, that `ImageEngine` can provide better optimisations and the reason is related to how the `Next.js` `Image` component works. \n\nWhen we set `deviceSizes: [1920, 1500, 1000, 500, 300]` on our `next.config.js` what we’re saying is, we’ll have 5 buckets of width sizes we want to allow. By using the `sizes` property on the `Image` component we can make it so that given a certain `width` the browser will try to match it with the smallest possible `srcset` that covers that `width`. For horizontal or square images this works fine, as there’s a direct match between the max width and the bucket. But when the image is vertical, this no longer matches neatly. So if you open the lightbox with a vertical image and the viewport size is `1800px` wide, but only `750px` high, the image that will be retrieved will be the one matching the `1920` entry. This is actually a bigger image since it’s vertical, it’s width to match `1920` will make it quite bigger than it needs to be. \n\nWhen using `ImageEngine`, in the same situation, with a [fitMethod of box](https:\u002F\u002Fsupport.imageengine.io\u002Fhc\u002Fen-us\u002Farticles\u002F360058880672-Directives), `ImageEngine`’s engine will actually be smart enough to see that the image needs to be `750px` high at most, and will resize it by that axis. So the result might be a `400px X 750px` image, instead of `1920px X 3000px` for instance. \n\nIf we had exact information for both width and height of the actual images, we could try to work around that limitation of the `Next.js` optimizer, by doing ourselves the calculations of what width would correspond to that maximum height - but since this isn’t normally available we usually can’t. Plus, that would need to change whenever we had changes on layout, styling, or on the source images.\n\nWith `ImageEngine` we don’t need to worry about that, since it’s always going to be the perfect fit for the dimensions we give it. Plus, in the case of the thumbnails, if we changed the size of the wrappers in CSS, it would still work automatically, whereas with the default `Image` component we might need to change our `deviceSizes` or do small adjustments. We could even make the `thumbnail` element be completely future proof if instead of providing only the `width` (as it was a square) we also provided the `height` of the wrapper, so that even if we changed the styling to a different ratio it would still work correctly. Since it’s a demo, we’re using only one side but there’s no reason to not use both as we already have the DOM element from which we can extract the height as well.\n\nThe last part is to define our main `index.js` file.\n\n###index.js entry point\n\nLet’s replace the contents of `pages\u002Findex.js`:\n\n```js\nimport Head from \"next\u002Fhead\";\n\nimport Thumbnail from \"..\u002Fcomponents\u002Fthumbnail.js\";\nimport Lightbox from \"..\u002Fcomponents\u002Flightbox.js\";\n\nimport { useEffect, useState } from \"react\";\n\nconst IMAGES = [\n    [\"\u002Fie-loader-images\u002Fh-lightbox-1.jpeg\", \"Harvested field with hay bales - Alentejo, Portugal © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-2.jpeg\", \"Family cycling and skating in abandoned Tempelhof Airport lane - Berlin, Germany © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-8.jpeg\", \"Group of hindu and muslim kids posing for a photo - New Delhi, India © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fv-lightbox-4.jpeg\", \"Buddhist Monk Portrait with a statue of the buddhist mythological Seven Headed Naga  serving as background - Siem Reap, Cambodia © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-5.jpeg\", \"Traditional Nepalase Hindu Temple in one of the many lively city squares of Kathmandu, Nepal © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fv-lightbox-6.jpeg\", \"Woman in traditional Nepalese clothing sitting in a valley in Pokhara, Nepal © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-7.jpeg\", \"Geometric pattern on a ceiling inside the Red Fort - New Delhi, India © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-3.jpeg\", \"Kids silhuetes in the sea near-shore close to sunset - Phu Quoc Island, Vietnam © Micael Nussbaumer\"],\n    [\"\u002Fie-loader-images\u002Fh-lightbox-9.jpeg\", \"Portrait of four man sitting during a pause in their badminton game - Hanoi, Vietnam © Micael Nussbaumer\"]\n];\n\n\nexport default function Home() {\n\n    let [opened, set_opened] = useState(false);\n    let [window_sizes, set_window_sizes] = useState(null);\n    let resize_timer;\n\n    const get_window_sizes = () =\u003E {\n\tlet doc = document.documentElement;\n\treturn {w: doc.clientWidth, h: doc.clientHeight};\n    };\n\n    const previous = (evt) =\u003E {\n\tevt.stopPropagation();\n\tif (opened \u003E 0) { set_opened(opened - 1); }\n\telse { set_opened(IMAGES.length - 1); }\n    };\n\n    const next = (evt) =\u003E {\n\tevt.stopPropagation();\n\tif (opened \u003C (IMAGES.length - 1)) { set_opened(opened + 1); }\n\telse { set_opened(0); }\n    };\n\n    const set_timing = () =\u003E {\n\tif (resize_timer) { clearTimeout(resize_timer); }\n\tresize_timer = setTimeout(\n\t    () =\u003E  {\nset_window_sizes(get_window_sizes());\nresize_timer = null;\n    }, 2000\n\t);\n    };\n\n    useEffect(() =\u003E {\n\twindow.addEventListener(\"resize\", set_timing);\n\tset_window_sizes(get_window_sizes());\n\n\treturn () =\u003E window.removeEventListener(\"resize\", set_timing);\n    }, []);\n    \n    return (\n\t\u003Cdiv className={`main-container ${opened || opened === 0 ? \"no-overflow\" : \"\"}`} \u003E\n\t  \u003CHead\u003E\n            \u003Ctitle\u003EImageEngine Optimized Lightbox\u003C\u002Ftitle\u003E\n            \u003Cmeta name=\"description\" content=\"Next.js custom image loaders leveraging ImageEngine CDN for highly optimized images\" \u002F\u003E\n            \u003Clink rel=\"icon\" href=\"\u002Ffavicon.ico\" \u002F\u003E\n\t  \u003C\u002FHead\u003E\n\t  \u003Cmain\u003E\n\t    {IMAGES.map(([path, alt], index) =\u003E {\n\t\treturn \u003CThumbnail key={`image-thumb-${index}`} src={path} alt={alt} onClick={(_evt) =\u003E set_opened(index)} window_sizes={window_sizes}\u002F\u003E ;\n\t\t  })\n\t      }\n\t  \u003C\u002Fmain\u003E\n\t  {opened || opened === 0 ? \u003CLightbox src={IMAGES[opened][0]} alt={IMAGES[opened][1]} onClick={(_evt) =\u003E set_opened(null)} window_sizes={window_sizes} previous={previous} next={next}\u002F\u003E : null}\n\t    \u003Cfooter\u003E\n\t      \u003Ca href=\"https:\u002F\u002Fimageengine.io\" target=\"_blank\"\u003EImageEngine\u003C\u002Fa\u003E\n\t      \u003Ca href=\"https:\u002F\u002Fmicaelnussbaumer.com\" target=\"_blank\"\u003E© Micael Nussbaumer 2021\u003C\u002Fa\u003E\n\t      \n\t      \u003Ca href=\"https:\u002F\u002Fnextjs.org\" target=\"_blank\"\u003ENext.js\u003C\u002Fa\u003E\n\t      \u003Ca href=\"https:\u002F\u002Fvercel.com\" target=\"_blank\"\u003EVercel\u003C\u002Fa\u003E\n\t    \u003C\u002Ffooter\u003E\n\t\u003C\u002Fdiv\u003E\n    );\n};\n```\n\nIn our `index.js` file we define an `IMAGES` array, that contains the images we’ll show. The contents are mostly straightforward. We use `useState` to set both the window size and if the lightbox is open. We define functions for getting the window size, for moving forward and backwards across the images, and to control any possible resizing of the viewport.\n\nOn first mount, we `useEffect` to set a listener on the `window resize` event and we set the original window sizes. Although we only have one page in our `Next.js` app, we also set a cleanup function on the `useEffect` by returning an anonymous function to remove the `eventListener` we added previously. This is just good form, because if you’re using React as a SPA with multiple pages and you don’t clean-up your useEffects, you might end with memory-leaks or multiple listeners being triggered (and most likely throwing exceptions since what they’ll be referring to won’t be around anymore).\n\nRegarding the `resize` event we use a `setTimeout` and a control variable `resize_timer`. This is so that we don’t trigger multiple `window_sizes` changes - as that would trickle down to our components and trigger multiple fetches for different image sources as the dimensions changed, for instance if resizing the window on a desktop manually. At the same time, listening to resize events and updating the `window_sizes` takes care of refetching the correct size in case a user is seeing the website on a mobile and changes the display from vertical to horizontal for instance. \n\nThe `JSX` contents are pretty regular, we map our `IMAGES` array into `Thumbnail`’s components passing `src`, `alt`, `window_sizes` and a `onClick` handle.\n\nThen when clicking one of the thumbnails, the `opened` state is updated to the index of that image in our array and we use that to both display our `Lightbox` component and to read the correct data for our image. On the `Lightbox` we pass the same props plus the `previous` and `next` functions.\nLastly we have a few `footer` items.\nAnd that’s it.\n\n###Setting up ImageEngine\n\nWith this we can already host our page in `vercel`, by using their CLI from our project’s root folder executing:\n\n`vercel` \n\nAnd setting up the project settings, followed by:\n\n`vercel --prod`\n\n...to deploy. \n\nYou’ll now be able to see the website online. Take note of your production server url.\nOnce that is done it’s time to setup the `ImageEngine` distribution.\n\nYou can follow this video on how to easily signup for a trial\n\n{% vimeo 552953993 %}\n[imageengine.io](https:\u002F\u002Fimageengine.io)\n\nAfter following those steps, take note of the delivery address, because we'll use it when building our project. We can do it through the `Vercel` dashboard for our project, or through the `CLI` when deploying:\n\n`vercel --build-env DISTRIBUTION=”https:\u002F\u002Four_ie_address.imgeng.in” --prod`\n\nWith that, our custom loaders will be enabled, and if we visit our website and inspect the HTML source we should see that it’s now using our `ImageEngine` distribution for the images!\n\n###Conclusion\n\nWhile `Next.js`’s `Image` component along with `vercel`’s automated infrastructure is really a great improvement over using non-optimized assets and will work well for many types of websites, there’s a few cases where **ImageEngine is a better option overall**. \n\nThose include websites with very high traffic and image content. The more targeted, and almost pixel precise, sizes it allows one to deliver, can lower significantly the sizes of images being transferred. Websites with mixed orientation content in any significant quantity also benefit widely from it. \n\nAnother situation is, if you’re using `Next.js` but not deploying on `vercel` then you’ll probably want to use it too - the `Image` component works the best possible in `vercel` as its infrastructure is prepared to handle it specifically (they’re the authors of `Next.js`) but if you’re deploying on your own server then it’s a different matter and having it stored, prepared and cached over a very fast external CDN will help you achieve the best performance for your website. \n\nLastly, as we saw, by taking some measures when writing the logic for the loader, we can make it so that our components are automatically able to handle changes in layout, styling or structure without any tweaking or re-doing of the app settings or components logic while keeping the exact needed sizes for any dimensions we decide to use. This is important as it removes one friction point when contemplating a re-styling of the whole or parts of the app.\n";c.user={name:"Micael Nussbaumer",username:f,twitter_username:a,github_username:f,website_url:a,profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--hXiybPFd--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F635775\u002F6465f7e6-4750-49b7-b0be-d36c8e90b8cf.jpeg",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--_O88xUly--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F635775\u002F6465f7e6-4750-49b7-b0be-d36c8e90b8cf.jpeg"};return {data:[{}],fetch:{"data-v-25febe66:0":{article:c}},mutations:[["SET_CURRENT_ARTICLE",c]]}}(null,"2021-06-29T16:35:23Z",{},"https:\u002F\u002Fdev.to\u002Fmnussbaumer\u002Fimage-engine-custom-loaders-for-next-js-2oe5",7,"mnussbaumer")));