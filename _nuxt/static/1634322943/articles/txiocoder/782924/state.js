window.__NUXT__=(function(a,b,c,d,e){return {staticAssetsBase:"\u002F_nuxt\u002Fstatic\u002F1634322943",layout:"default",error:a,state:{currentArticle:{type_of:"article",id:782924,title:"RESTful API, Updating Object by Action Query Parameter ",description:"This article has some disadvantages and some conceptual errors that I could only notice after...",readable_publish_date:"Aug 6",slug:"restful-api-updating-object-by-action-query-parameter-3pmj",path:"\u002Ftxiocoder\u002Frestful-api-updating-object-by-action-query-parameter-3pmj",url:c,comments_count:7,public_reactions_count:d,collection_id:a,published_timestamp:e,positive_reactions_count:d,cover_image:a,social_image:"https:\u002F\u002Fdev.to\u002Fsocial_previews\u002Farticle\u002F782924.png",canonical_url:c,created_at:"2021-08-05T19:20:59Z",edited_at:"2021-09-29T10:15:13Z",crossposted_at:a,published_at:e,last_comment_at:"2021-08-13T16:45:26Z",reading_time_minutes:4,tag_list:"django, python, codequality, restful",tags:["django","python","codequality","restful"],body_html:"\u003Cblockquote\u003E\n\u003Cp\u003EThis article has some disadvantages and some conceptual errors that I could only notice after writing it.  However, there are also beautiful advantages.  I invite you to read the comments exchanged with \u003Ca class=\"mentioned-user\" href=\"https:\u002F\u002Fdev.to\u002Frouilj\"\u003E@rouilj\u003C\u002Fa\u003E\n, and be free to participate in the discussion.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EOkay, let’s dive into it! In this post I will show you how you can leave your RESTful API design more beautiful and expressive in code and documentation.\u003C\u002Fp\u003E\n\n\u003Cp\u003ESo, what I mean with: updating object by action query parameter?\u003C\u002Fp\u003E\n\n\u003Cp\u003ELet’s suppose you have a Users resources and you need to update a user and perform some tasks (in background) after updating. Something like send new verification email, notification about username changed or something else.\u003C\u002Fp\u003E\n\n\u003Cp\u003EProbably you will have an endpoint like: \u003Ccode\u003E\u002Fusers\u002F{user_id}\u002F\u003C\u002Fcode\u003E pointed to some view\u002Fcontroller (class method or function) that accepts \u003Cstrong\u003EPUT\u003C\u002Fstrong\u003E operation. Proceed with some verification to see what kind of changes are requested to do, and then you will execute the right task.\u003C\u002Fp\u003E\n\n\u003Cp\u003ESo, doing this will probably result in a lot of verification and big views and not so beautiful to document our API endpoint.\u003C\u002Fp\u003E\n\n\u003Cp\u003EOr maybe you will add a lot of endpoints such as \u003Ccode\u003E\u002Fusers\u002F{user_id}\u002Fchange-email\u002F\u003C\u002Fcode\u003E, \u003Ccode\u003E\u002Fusers\u002F{user_id}\u002Fchange-username\u002F\u003C\u002Fcode\u003E, … and point each endpoint to respective function.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThis results, but isn’t elegant as we want o to be, right? But not only because of this, having multiple functions decentralized related to same resource and objective (update) isn’t the best practice.\u003C\u002Fp\u003E\n\n\u003Cblockquote\u003E\n\u003Cp\u003EThat’s why I suggest you to use action query parameter.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EWith action query parameter we can route the request to the right update (or even retrieve) function. This will bring to us a clean business logic and better API documentation.\u003C\u002Fp\u003E\n\n\u003Cp\u003EAs an example, I will show you some piece of code in \u003Ca href=\"https:\u002F\u002Fpython.org\"\u003EPython\u003C\u002Fa\u003E,  \u003Ca href=\"https:\u002F\u002Fwww.djangoproject.com\u002F\"\u003EDjango\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Fwww.django-rest-framework.org\u002F\"\u003EREST Framework\u003C\u002Fa\u003E. But I want you to focus on business logic, so that you can implement with different language or framework.\u003C\u002Fp\u003E\n\n\u003Cp\u003EFirst we will define the update action that we want to enable in a list and make some imports. Those values will be the values that we’ll expect in query parameter to route and perform the right action\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight python\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E# imports...\n# -------------------------------------\n\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EUPDATE_ACTIONS\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"s\"\u003E'change-email'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"s\"\u003E'change-username'\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EUserDetailAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Epass\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EThe idea of have a  \u003Ccode\u003EUPDATE_ACTIONS\u003C\u002Fcode\u003E list is great because it’s can bring us the flexibility to disable (if necessary) an action just by comment the action line.\u003C\u002Fp\u003E\n\n\u003Cp\u003ENext, let’s define the default method that will handler all incoming update requests\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight python\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EUserDetailAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eput\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E# this will get the object and check related permissions between\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E# the authenticated account and the object\n\u003C\u002Fspan\u003E        \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eget_object\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nb\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E# I defined my action query parameter name as 'action'\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E# but you can call something else\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eaction\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EGET\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'action'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E \u003Cspan class=\"ow\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EUPDATE_ACTIONS\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n            \u003Cspan class=\"c1\"\u003E# following python naming convention\n\u003C\u002Fspan\u003E            \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ereplace\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'-'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E'_'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n            \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ehasattr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n                \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Egetattr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n            \u003Cspan class=\"k\"\u003Eraise\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EValidationError\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'Update action temporarily unavailable'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Eraise\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EValidationError\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'Unrecognized update action'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EAs you can see, all our main update method do is get the object and check related permissions and route dynamically the action to the right method.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWe also make some basic checks in case an action is unrecognized or the method isn’t available in our class.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWhat we have next to do is implement the action methods defined in our \u003Ccode\u003EUPDATE_ACTION\u003C\u002Fcode\u003E. I will show you in abstract way.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight python\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EUserDetailAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Echange_email\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E## change email business logic\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E## run bg task\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EResponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eserializer_class\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'request'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}).\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EHTTP_202_ACCEPTED\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Echange_username\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E## change username business logic\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E## run bg task\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EResponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eserializer_class\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'request'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}).\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EHTTP_202_ACCEPTED\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ESo, our full class will be something like shown below.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight python\"\u003E\u003Ccode\u003E\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Erest_framework.views\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EAPIView\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Erest_framework.response\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EResponse\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Erest_framework.exceptions\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EValidationError\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Erest_framework.permissions\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EIsAuthenticated\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Erest_framework\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Edjango.utils.translation\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Egettext_lazy\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003E_\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Euser.serializers\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EUserDetail\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"nn\"\u003Euser.permissions\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EAuthenticatedUserIsOwner\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E# --------------------------------------------\n\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EUPDATE_ACTIONS\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"s\"\u003E'change-email'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"s\"\u003E'change-username'\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EUserDetailAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EAPIView\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"n\"\u003Eserializer_class\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EUserDetail\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Epermission_classes\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EIsAuthenticated\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EAuthenticatedUserIsOwner\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E# ---------------------------------------\n\u003C\u002Fspan\u003E    \u003Cspan class=\"c1\"\u003E# API Calls\n\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eput\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E# this will get the object and check related permissions between\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E# the authenticated account and the object\n\u003C\u002Fspan\u003E        \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eget_object\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nb\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E# I defined my action query parameter name as 'action'\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E# but you can call something else\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eaction\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EGET\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'action'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E \u003Cspan class=\"ow\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EUPDATE_ACTIONS\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n            \u003Cspan class=\"c1\"\u003E# following python naming convention\n\u003C\u002Fspan\u003E            \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ereplace\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'-'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E'_'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n            \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ehasattr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n                \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Egetattr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eaction_method\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n            \u003Cspan class=\"k\"\u003Eraise\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EValidationError\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'Update action temporarily unavailable'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Eraise\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EValidationError\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'Unrecognized update action'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E))\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E# ---------------------------------------\n\u003C\u002Fspan\u003E    \u003Cspan class=\"c1\"\u003E# Update Actions\n\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Echange_email\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E## change email business logic\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E## run bg task\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EResponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eserializer_class\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'request'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}).\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EHTTP_202_ACCEPTED\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E# ---------------------------------------\n\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Echange_username\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E):\u003C\u002Fspan\u003E\n        \u003Cspan class=\"c1\"\u003E## change username business logic\n\u003C\u002Fspan\u003E        \u003Cspan class=\"c1\"\u003E## run bg task\n\u003C\u002Fspan\u003E        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EResponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eserializer_class\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euser\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E'request'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"bp\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}).\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EHTTP_202_ACCEPTED\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EThat's it, I hope you like this idea and help you write more elegant code with nice business logic. If you have some different idea share with me and other peoples in comments\u003C\u002Fp\u003E\n\n\n\u003Chr\u003E\n\n\u003Cp\u003EThanks for read, I hope you like and help you with something! I will be happy to know what you think about this. So, be sure to comment on your debt, criticism or suggestion. Enjoy and follow my work\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003ESee \u003Ca href=\"https:\u002F\u002Flinktr.ee\u002Ftxiocoder\"\u003EHere\u003C\u002Fa\u003E, all my resources.\u003C\u002Fli\u003E\n\u003Cli\u003ELearn With Me on \u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUCETQfLH1W0V1EBwp4iMOF6w\"\u003EYoutube\u003C\u002Fa\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EFollow Me on \u003Ca href=\"https:\u002F\u002Fwww.instagram.com\u002Ftxiocoder\u002F\"\u003EInstagram\u003C\u002Fa\u003E to stay updated.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EThanks,\u003Cbr\u003E\nStay safe!\u003C\u002Fp\u003E\n\n\n\u003Chr\u003E\n\n",body_markdown:"\u003E This article has some disadvantages and some conceptual errors that I could only notice after writing it.  However, there are also beautiful advantages.  I invite you to read the comments exchanged with @rouilj, and be free to participate in the discussion.\n\nOkay, let’s dive into it! In this post I will show you how you can leave your RESTful API design more beautiful and expressive in code and documentation.\n\nSo, what I mean with: updating object by action query parameter?\n\nLet’s suppose you have a Users resources and you need to update a user and perform some tasks (in background) after updating. Something like send new verification email, notification about username changed or something else.\n\nProbably you will have an endpoint like: ``\u002Fusers\u002F{user_id}\u002F`` pointed to some view\u002Fcontroller (class method or function) that accepts **PUT** operation. Proceed with some verification to see what kind of changes are requested to do, and then you will execute the right task.\n\nSo, doing this will probably result in a lot of verification and big views and not so beautiful to document our API endpoint.\n\nOr maybe you will add a lot of endpoints such as ``\u002Fusers\u002F{user_id}\u002Fchange-email\u002F``, ``\u002Fusers\u002F{user_id}\u002Fchange-username\u002F``, … and point each endpoint to respective function.\n\nThis results, but isn’t elegant as we want o to be, right? But not only because of this, having multiple functions decentralized related to same resource and objective (update) isn’t the best practice.\n\n\u003E That’s why I suggest you to use action query parameter.\n\nWith action query parameter we can route the request to the right update (or even retrieve) function. This will bring to us a clean business logic and better API documentation.\n\nAs an example, I will show you some piece of code in [Python](https:\u002F\u002Fpython.org),  [Django](https:\u002F\u002Fwww.djangoproject.com\u002F) and [REST Framework](https:\u002F\u002Fwww.django-rest-framework.org\u002F). But I want you to focus on business logic, so that you can implement with different language or framework.\n\nFirst we will define the update action that we want to enable in a list and make some imports. Those values will be the values that we’ll expect in query parameter to route and perform the right action\n\n```python\n# imports...\n# -------------------------------------\n\nUPDATE_ACTIONS = (\n    'change-email',\n    'change-username'\n)\n\nclass UserDetailAPIView(APIView):\n    pass\n```\n\nThe idea of have a  ``UPDATE_ACTIONS`` list is great because it’s can bring us the flexibility to disable (if necessary) an action just by comment the action line.\n\nNext, let’s define the default method that will handler all incoming update requests\n\n```python\nclass UserDetailAPIView(APIView):\n\n    def put(self, request, id):\n        # this will get the object and check related permissions between\n        # the authenticated account and the object\n        user = self.get_object(id)\n        # I defined my action query parameter name as 'action'\n        # but you can call something else\n        if (action := request.GET.get('action')) in UPDATE_ACTIONS:\n            # following python naming convention\n            action_method = action.replace('-', '_')\n            if hasattr(self, action_method)\n                return getattr(self, action_method)(user)\n            raise ValidationError(_('Update action temporarily unavailable'))\n        raise ValidationError(_('Unrecognized update action'))\n```\n\nAs you can see, all our main update method do is get the object and check related permissions and route dynamically the action to the right method.\n\nWe also make some basic checks in case an action is unrecognized or the method isn’t available in our class.\n\nWhat we have next to do is implement the action methods defined in our ``UPDATE_ACTION``. I will show you in abstract way.\n\n```python\nclass UserDetailAPIView(APIView):\n\n    def change_email(self, user):\n        ## change email business logic\n        ## run bg task\n        return Response(self.serializer_class(\n            user, context={'request': self.request}).data,\n            status=status.HTTP_202_ACCEPTED)\n    \n    def change_username(self, user):\n        ## change username business logic\n        ## run bg task\n        return Response(self.serializer_class(\n            user, context={'request': self.request}).data,\n            status=status.HTTP_202_ACCEPTED)\n```\n\nSo, our full class will be something like shown below.\n\n```python\nfrom rest_framework.views import APIView\nfrom rest_framework.response import Response\nfrom rest_framework.exceptions import ValidationError\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework import status\n\nfrom django.utils.translation import gettext_lazy as _\n\nfrom user.serializers import UserDetail\nfrom user.permissions import AuthenticatedUserIsOwner\n\n# --------------------------------------------\n\nUPDATE_ACTIONS = (\n    'change-email',\n    'change-username'\n)\n\nclass UserDetailAPIView(APIView):\n\n    serializer_class = UserDetail\n    permission_classes = (\n        IsAuthenticated,\n        AuthenticatedUserIsOwner\n    )\n\n    # ---------------------------------------\n    # API Calls\n\n    def put(self, request, id):\n        # this will get the object and check related permissions between\n        # the authenticated account and the object\n        user = self.get_object(id)\n        # I defined my action query parameter name as 'action'\n        # but you can call something else\n        if (action := request.GET.get('action')) in UPDATE_ACTIONS:\n            # following python naming convention\n            action_method = action.replace('-', '_')\n            if hasattr(self, action_method)\n                return getattr(self, action_method)(user)\n            raise ValidationError(_('Update action temporarily unavailable'))\n        raise ValidationError(_('Unrecognized update action'))\n    \n    # ---------------------------------------\n    # Update Actions\n\n    def change_email(self, user):\n        ## change email business logic\n        ## run bg task\n        return Response(self.serializer_class(\n            user, context={'request': self.request}).data,\n            status=status.HTTP_202_ACCEPTED)\n    \n    # ---------------------------------------\n\n    def change_username(self, user):\n        ## change username business logic\n        ## run bg task\n        return Response(self.serializer_class(\n            user, context={'request': self.request}).data,\n            status=status.HTTP_202_ACCEPTED)\n```\n\nThat's it, I hope you like this idea and help you write more elegant code with nice business logic. If you have some different idea share with me and other peoples in comments\n\n------------------------------------------------------------------------------\n\nThanks for read, I hope you like and help you with something! I will be happy to know what you think about this. So, be sure to comment on your debt, criticism or suggestion. Enjoy and follow my work\n\n- See [Here](https:\u002F\u002Flinktr.ee\u002Ftxiocoder), all my resources.\n- Learn With Me on [Youtube](https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUCETQfLH1W0V1EBwp4iMOF6w).\n- Follow Me on [Instagram](https:\u002F\u002Fwww.instagram.com\u002Ftxiocoder\u002F) to stay updated.\n\nThanks,\nStay safe!\n\n------------------------------------------------------------------------------\n",user:{name:"AM",username:b,twitter_username:b,github_username:b,website_url:"https:\u002F\u002Flinktr.ee\u002Ftxiocoder",profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--UlF1bdgM--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F343923\u002F20d3a133-b297-4288-805f-fee55e368b0f.jpeg",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--dmmlW5_y--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F343923\u002F20d3a133-b297-4288-805f-fee55e368b0f.jpeg"}}},serverRendered:true,routePath:"\u002Farticles\u002Ftxiocoder\u002F782924",config:{_app:{basePath:"\u002F",assetsPath:"\u002F_nuxt\u002F",cdnURL:a}}}}(null,"txiocoder","https:\u002F\u002Fdev.to\u002Ftxiocoder\u002Frestful-api-updating-object-by-action-query-parameter-3pmj",15,"2021-08-06T14:23:05Z"));