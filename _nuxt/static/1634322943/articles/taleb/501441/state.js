window.__NUXT__=(function(a,b,c,d){return {staticAssetsBase:"\u002F_nuxt\u002Fstatic\u002F1634322943",layout:"default",error:a,state:{currentArticle:{type_of:"article",id:501441,title:"Wagtail Admin+netlify",description:"Netlify API Doc https:\u002F\u002Fopen-api.netlify.com\u002F  this are the three api endpoint we need https:\u002F\u002Fapi.ne...",readable_publish_date:"Oct 29 '20",slug:"wagtail-admin-netlify-47f0",path:"\u002Ftaleb\u002Fwagtail-admin-netlify-47f0",url:c,comments_count:0,public_reactions_count:d,collection_id:a,published_timestamp:b,positive_reactions_count:d,cover_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--8I8YthZE--\u002Fc_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002Fhet6k1lo0p4ii6vctdlj.png",social_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--HB8ashuZ--\u002Fc_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002Fhet6k1lo0p4ii6vctdlj.png",canonical_url:c,created_at:"2020-10-29T18:24:09Z",edited_at:a,crossposted_at:a,published_at:b,last_comment_at:b,reading_time_minutes:1,tag_list:"wagtail, netlify, admin, python",tags:["wagtail","netlify","admin","python"],body_html:"\u003Cp\u003ENetlify API Doc\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fopen-api.netlify.com\u002F\"\u003Ehttps:\u002F\u002Fopen-api.netlify.com\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003Ethis are the three api endpoint we need\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F%7Bsite_id%7D\u002Fdeploys\"\u003Ehttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F{site_id}\u002Fdeploys\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F%7Bsite_id%7D\u002Fdeploys\u002F%7Bdeploy_id%7D\"\u003Ehttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F{site_id}\u002Fdeploys\u002F{deploy_id}\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fdeploys\u002F%7Bdeploy_id%7D\u002Fcancel\"\u003Ehttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fdeploys\u002F{deploy_id}\u002Fcancel\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"netlify-class\" href=\"#netlify-class\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Netlify Class\n\u003C\u002Fh3\u003E\n\n\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight plaintext\"\u003E\u003Ccode\u003Eclass Netlify(object):\n    def __init__(\n        self, netlify_site_name, netlify_api_key, netlify_site_id, netlify_webhook_id\n    ):\n...\n\n    def start_job(self):\n        url = f\"https:\u002F\u002Fapi.netlify.com\u002Fbuild_hooks\u002F{self.webhook_id}\"\n        requests.post(url)\n        return self.list_jobs()[0][\"id\"]\n\n    def stop_job(self, deploy_id):\n        url = f\"{self.base_url}\u002Fdeploys\u002F{deploy_id}\u002Fcancel\"\n        self.make_request(url, \"POST\")\n\n    def get_job(self, deploy_id):\n        url = f\"{self.base_url}\u002Fsites\u002F{self.site_id}\u002Fdeploys\u002F{deploy_id}\"\n        return self.make_request(url, action=\"GET\")\n\n    def list_jobs(self):\n        url = f\"{self.base_url}\u002Fsites\u002F{self.site_id}\u002Fdeploys\"\n        return self.make_request(url=url, action=\"GET\")\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Ch3\u003E\n  \u003Ca name=\"wagtail-admin-view\" href=\"#wagtail-admin-view\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Wagtail admin view\n\u003C\u002Fh3\u003E\n\n\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight plaintext\"\u003E\u003Ccode\u003Eamplify = Amplify(\n        aws_access_key_id=settings.AMPLIFY_AWS_ACCESS_KEY_ID,\n        aws_secret_access_key=settings.AMPLIFY_AWS_SECRET_ACCESS_KEY,\n        app_id=settings.AMPLIFY_APP_ID,\n        branch_name=settings.AMPLIFY_BRANCH,\n    )\n\ndef netlify_jobs(request):\n\n    job_id = request.GET.get(\"jobid\", \"\")\n    if job_id:\n        active_job = netlify.get_job(job_id)\n\n    jobs = netlify.list_jobs()\n   ....\n   render template\n\ndef start_build(request):\n    jobid = netlify.start_job()\n    ....\n\n\ndef stop_build(request, job_id):\n    netlify.stop_job(job_id)\n    ....\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n",body_markdown:"Netlify API Doc\nhttps:\u002F\u002Fopen-api.netlify.com\u002F\n\nthis are the three api endpoint we need\nhttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F{site_id}\u002Fdeploys\nhttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fsites\u002F{site_id}\u002Fdeploys\u002F{deploy_id}\nhttps:\u002F\u002Fapi.netlify.com\u002Fapi\u002Fv1\u002Fdeploys\u002F{deploy_id}\u002Fcancel\n\n### Netlify Class\n```\nclass Netlify(object):\n    def __init__(\n        self, netlify_site_name, netlify_api_key, netlify_site_id, netlify_webhook_id\n    ):\n...\n\n    def start_job(self):\n        url = f\"https:\u002F\u002Fapi.netlify.com\u002Fbuild_hooks\u002F{self.webhook_id}\"\n        requests.post(url)\n        return self.list_jobs()[0][\"id\"]\n\n    def stop_job(self, deploy_id):\n        url = f\"{self.base_url}\u002Fdeploys\u002F{deploy_id}\u002Fcancel\"\n        self.make_request(url, \"POST\")\n\n    def get_job(self, deploy_id):\n        url = f\"{self.base_url}\u002Fsites\u002F{self.site_id}\u002Fdeploys\u002F{deploy_id}\"\n        return self.make_request(url, action=\"GET\")\n\n    def list_jobs(self):\n        url = f\"{self.base_url}\u002Fsites\u002F{self.site_id}\u002Fdeploys\"\n        return self.make_request(url=url, action=\"GET\")\n\n```\n###Wagtail admin view\n```\namplify = Amplify(\n        aws_access_key_id=settings.AMPLIFY_AWS_ACCESS_KEY_ID,\n        aws_secret_access_key=settings.AMPLIFY_AWS_SECRET_ACCESS_KEY,\n        app_id=settings.AMPLIFY_APP_ID,\n        branch_name=settings.AMPLIFY_BRANCH,\n    )\n\ndef netlify_jobs(request):\n\n    job_id = request.GET.get(\"jobid\", \"\")\n    if job_id:\n        active_job = netlify.get_job(job_id)\n\n    jobs = netlify.list_jobs()\n   ....\n   render template\n\ndef start_build(request):\n    jobid = netlify.start_job()\n    ....\n\n\ndef stop_build(request, job_id):\n    netlify.stop_job(job_id)\n    ....\n```",user:{name:"Taleb",username:"taleb",twitter_username:a,github_username:"talebbits",website_url:a,profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--YittC0aH--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F218125\u002Fa08f6304-4824-4c6c-a865-8a0f687a27b8.png",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--m5dqweKf--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F218125\u002Fa08f6304-4824-4c6c-a865-8a0f687a27b8.png"}}},serverRendered:true,routePath:"\u002Farticles\u002Ftaleb\u002F501441",config:{_app:{basePath:"\u002F",assetsPath:"\u002F_nuxt\u002F",cdnURL:a}}}}(null,"2020-10-29T18:34:30Z","https:\u002F\u002Fdev.to\u002Ftaleb\u002Fwagtail-admin-netlify-47f0",2));