__NUXT_JSONP__("/articles/okeeffed/508503", (function(a,b,c,d,e){b.type_of="article";b.id=508503;b.title="Taking Stripe Payments With Next.js 10, TypeScript 4, React 17 and Vercel";b.description="Over my previous posts, I have been exploring some of the neat things about Next.js 10 and using Verc...";b.readable_publish_date="Nov 7 '20";b.slug="taking-stripe-payments-with-next-js-10-typescript-4-react-17-and-vercel-3m6f";b.path="\u002Fokeeffed\u002Ftaking-stripe-payments-with-next-js-10-typescript-4-react-17-and-vercel-3m6f";b.url="https:\u002F\u002Fdev.to\u002Fokeeffed\u002Ftaking-stripe-payments-with-next-js-10-typescript-4-react-17-and-vercel-3m6f";b.comments_count=1;b.public_reactions_count=c;b.collection_id=a;b.published_timestamp=d;b.positive_reactions_count=c;b.cover_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--k0RHHsp7--\u002Fc_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-nextjs-10-with-stripe-main-image.png%3Fraw%3Dtrue";b.social_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--COIlRZ7f--\u002Fc_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-nextjs-10-with-stripe-main-image.png%3Fraw%3Dtrue";b.canonical_url="https:\u002F\u002Fblog.dennisokeeffe.com\u002Fblog\u002F2020-11-07-nextjs-10-with-stripe\u002F";b.created_at="2020-11-07T00:41:20Z";b.edited_at=a;b.crossposted_at=a;b.published_at=d;b.last_comment_at="2021-03-26T11:33:48Z";b.reading_time_minutes=9;b.tag_list="nextjs, stripe, typescript, vercel";b.tags=["nextjs","stripe","typescript","vercel"];b.body_html="\u003Cp\u003EOver my previous posts, I have been exploring some of the neat things about Next.js 10 and using Vercel as a host.\u003C\u002Fp\u003E\n\n\u003Cp\u003EToday we are going to show how you can build out your next store or start financing your own dreams.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWe will use a Stripe + Nextjs starter template, upgrade React to version 17, TypeScript to version 4 and deploy the final working application to Vercel via the CLI.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Cem\u003EI tell you what, I sure am ready to leave me 9-5 job.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"prerequisites-and-requirements\" href=\"#prerequisites-and-requirements\"\u003E\n  \u003C\u002Fa\u003E\n  Prerequisites and requirements\n\u003C\u002Fh2\u003E\n\n\u003Col\u003E\n\u003Cli\u003EHave a Stripe account.\u003C\u002Fli\u003E\n\u003Cli\u003EHave your \u003Ca href=\"https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Flocate-api-keys-in-the-dashboard#:~:text=Users%20with%20Administrator%20permissions%20can,and%20clicking%20on%20API%20Keys.&amp;text=If%20you%20have%20already%20enabled,one%20or%20more%20hardware%20security%E2%80%A6\"\u003EAPI keys\u003C\u002Fa\u003E ready.\u003C\u002Fli\u003E\n\u003Cli\u003EA \u003Ca href=\"https:\u002F\u002Fvercel.com\"\u003EVercel\u003C\u002Fa\u003E account.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"getting-started\" href=\"#getting-started\"\u003E\n  \u003C\u002Fa\u003E\n  Getting started\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EThanks to \u003Ccode\u003Ecreate-next-app\u003C\u002Fcode\u003E, we already have an example that we can get started with and explore!\u003C\u002Fp\u003E\n\n\u003Cp\u003ERun the following to create a Next.js example app in the folder \u003Ccode\u003Ewith-stripe-typescript-app\u003C\u002Fcode\u003E:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight r\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E# Create Stripe TypeScript example\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enpx\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecreate\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapp\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eexample\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewith\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etypescript\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewith\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etypescript\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapp\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EChange into the newly-created directory.\u003C\u002Fp\u003E\n\n\u003Cp\u003EOptionally, We are going to make some changes to this template for the sake of bringing TypeScript and React things up to version 4 and 17 respectively!\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight r\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E# Move TypeScript from v3 -&gt; v4, React from v16 -&gt; v17\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enpm\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Einstall\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E@\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elatest\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edom\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E@\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elatest\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E# Update types\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enpm\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Einstall\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esave\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edev\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etypescript\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E@\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elatest\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E@\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etypes\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E@\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elatest\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EIn my case, this brought TypeScript up to v4.0.5 and React + ReactDOM to v17.0.1. Note that in future, breaking changes could break the app.\u003C\u002Fp\u003E\n\n\u003Cblockquote\u003E\n\u003Cp\u003EYou could check for the other packages as well (Stripe, etc.) but I will leave them for the sake of working with what is currently there.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"preparing-the-app\" href=\"#preparing-the-app\"\u003E\n  \u003C\u002Fa\u003E\n  Preparing the app\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EBefore we go too deep into exploration, we need to add in your \u003Ca href=\"https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\"\u003EStripe API Keys\u003C\u002Fa\u003E. In my case, I will just use the test keys from the dashboard.\u003C\u002Fp\u003E\n\n\u003Cp\u003EAs for the webhook secret, this comes from the \u003Ca href=\"https:\u002F\u002Fstripe.com\u002Fdocs\u002Fstripe-cli\"\u003EStripe CLI\u003C\u002Fa\u003E. Follow the instructions on the link to install.\u003C\u002Fp\u003E\n\n\u003Cp\u003EAfter installing the Stripe CLI, run \u003Ccode\u003Estripe login\u003C\u002Fcode\u003E and log into your account (this will open up the browser to confirm).\u003C\u002Fp\u003E\n\n\u003Cp\u003ENext, run \u003Ccode\u003Estripe listen --forward-to localhost:&lt;your-port-likely-3000&gt;\u002Fapi\u002Fwebhooks\u003C\u002Fcode\u003E. This will give you back a webhook secret you can use.\u003C\u002Fp\u003E\n\n\u003Cp\u003EFrom the root of the project, run \u003Ccode\u003Ecp .env.local.example\u003C\u002Fcode\u003E to \u003Ccode\u003E.env.local.example\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EInside, you'll fine some environment variables that we need to update:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight r\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E# Stripe keys\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E# https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ENEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyour\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Epk\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESTRIPE_SECRET_KEY\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyour\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esk\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESTRIPE_PAYMENT_DESCRIPTION\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E'Software development services'\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E# https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks\u002Fsignatures\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESTRIPE_WEBHOOK_SECRET\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyour\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhook\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esecret\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecli\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"exploring-the-app\" href=\"#exploring-the-app\"\u003E\n  \u003C\u002Fa\u003E\n  Exploring the app\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ETo start the app, run \u003Ccode\u003Enpm run dev\u003C\u002Fcode\u003E in the terminal.\u003C\u002Fp\u003E\n\n\u003Cp\u003EHead to \u003Cstrong\u003E\u003Ca href=\"http:\u002F\u002Flocalhost:3000\"\u003Ehttp:\u002F\u002Flocalhost:3000\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E and you'll be faced with the following screen:\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--d1etJvV6--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-1-localhost-nextjs-app.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--d1etJvV6--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-1-localhost-nextjs-app.png%3Fraw%3Dtrue\" alt=\"Localhost running\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003ELocalhost running\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cp\u003EThis page allows us to run three examples:\u003C\u002Fp\u003E\n\n\u003Col\u003E\n\u003Cli\u003EDonation using Stripe Checkout.\u003C\u002Fli\u003E\n\u003Cli\u003EDonation using Stripe Elements.\u003C\u002Fli\u003E\n\u003Cli\u003EUsing the Shopping Cart.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\n\u003Cp\u003ELet's explore the code for each page.\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"donate-with-stripe-checkout\" href=\"#donate-with-stripe-checkout\"\u003E\n  \u003C\u002Fa\u003E\n  Donate with Stripe Checkout\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EChecking out the first option with \u003Cstrong\u003EDonation with Checkout\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe code for how this page works can be found at \u003Ccode\u003Epages\u002Fdonate-with-checkout.tsx\u003C\u002Fcode\u003E.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight typescript\"\u003E\u003Ccode\u003E\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ENextPage\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Enext\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ELayout\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E..\u002Fcomponents\u002FLayout\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ECheckoutForm\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E..\u002Fcomponents\u002FCheckoutForm\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EDonatePage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ENextPage\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ELayout\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003EDonate with Checkout | Next.js + TypeScript Example\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Epage-container\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eh1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDonate\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Ewith\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ECheckout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fh1\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EDonate\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eto\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eour\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eproject\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E💖\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fp\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E        \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ECheckoutForm\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F&gt;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002Fdiv\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E    \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"sr\"\u003E\u002FLayout\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E&gt;\n\u003C\u002Fspan\u003E  \u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EDonatePage\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cblockquote\u003E\n\u003Cp\u003EAll the future examples can be found at \u003Ccode\u003Epages\u002Fpath\u002Fto\u002Froute\u003C\u002Fcode\u003E. I won't be touching deeper on the page entry points moving further.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EWithin that form, we can see the checkout form in \u003Ccode\u003Ecomponents\u002FCheckoutForm\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWhile I won't go too deep into each and every piece of information here, if we look at the code and see the \u003Ccode\u003EhandleSubmit\u003C\u002Fcode\u003E closure function, we can see where most the important information comes from:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight typescript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EhandleSubmit\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EReact\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EFormEventHandler\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EHTMLFormElement\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ee\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003Ee\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EpreventDefault\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003EsetLoading\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F Create a Checkout Session.\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EfetchPostJSON\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003E\u002Fapi\u002Fcheckout_sessions\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003Eamount\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Einput\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcustomDonation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EstatusCode\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emessage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F Redirect to Checkout.\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Estripe\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EgetStripe\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EredirectToCheckout\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Make the id field from the Checkout Session creation API response\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F available to this file, so you can provide it as parameter here\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F instead of the {{CHECKOUT_SESSION_ID}} placeholder.\u003C\u002Fspan\u003E\n    \u003Cspan class=\"na\"\u003EsessionId\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F If `redirectToCheckout` fails due to a browser or network\u003C\u002Fspan\u003E\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F error, display the localized error message to your customer\u003C\u002Fspan\u003E\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F using `error.message`.\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewarn\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emessage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003EsetLoading\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EThis code re-directs us to the Stripe Checkout where we can pay with some test cards.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe API call code it uses to authorize the checkout session comes from \u003Ccode\u003Epages\u002Fapi\u002Fcheckout_sessions\u002F*.ts\u003C\u002Fcode\u003E where \u003Ccode\u003E*\u003C\u002Fcode\u003E refers to any of the three files that help out here.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIf we run through the UI and click on \"donate\" we can see that in action.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--0AgJUW0p--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-2-stripe-checkout.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--0AgJUW0p--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-2-stripe-checkout.png%3Fraw%3Dtrue\" alt=\"Stripe Checkout\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EStripe Checkout\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cp\u003EUsing a \u003Ca href=\"https:\u002F\u002Fstripe.com\u002Fdocs\u002Ftesting\"\u003EStripe test card\u003C\u002Fa\u003E we can pop in \u003Ccode\u003E4242 4242 4242 4242\u003C\u002Fcode\u003E for the card number, any 3 digits for the CVC and any future date for validating the purchase.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIf we check our terminal, we will see some neat confirmation logs for both the Nextjs app logs and webhook logs:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight r\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E# Nextjs App logs\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E✅\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESuccess\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6eJV8JMnC8XlhOPbQAy2\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E💵\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ECharge\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ech_1Hke6dJV8JMnC8XltpI9mM15\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E✅\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESuccess\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6eJV8JMnC8Xlm2EtO9Cq\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E🤷‍♀️\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EUnhandled\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Epayment_method.attached\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E✅\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESuccess\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6eJV8JMnC8XlpWp04upc\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E🤷‍♀️\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EUnhandled\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecustomer.created\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E✅\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESuccess\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6fJV8JMnC8Xl29TUZxrT\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E💰\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPaymentIntent\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esucceeded\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E✅\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESuccess\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6fJV8JMnC8XlcTKuetWs\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E🤷‍♀️\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EUnhandled\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Echeckout.session.completed\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E# Stripe Webhook Logs\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E04\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E59\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E08\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E46\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Epayment_intent.created\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E08\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E46\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E33\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Echarge.succeeded\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E33\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Epayment_method.attached\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6eJV8JMnC8Xlm2EtO9Cq\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecustomer.created\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6eJV8JMnC8XlpWp04upc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Epayment_intent.succeeded\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6fJV8JMnC8Xl29TUZxrT\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E   \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E--&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Echeckout.session.completed\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_1Hke6fJV8JMnC8XlcTKuetWs\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E2020-11-07\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E34\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;--\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E  \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ehttp\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elocalhost\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"m\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ewebhooks\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eevt_id\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"w\"\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EThe UI itself will redirect to \u003Ccode\u003E\u002Fresult\u003C\u002Fcode\u003E where the response JSON body will be shown.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--9hNiQ8fE--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-3-checkout-result.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--9hNiQ8fE--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-3-checkout-result.png%3Fraw%3Dtrue\" alt=\"Response on result page\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EResponse on result page\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"donate-with-stripe-elements\" href=\"#donate-with-stripe-elements\"\u003E\n  \u003C\u002Fa\u003E\n  Donate with Stripe Elements\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIf we return to the home page and select the \u003Ccode\u003EDonate with Elements\u003C\u002Fcode\u003E option, we will come to a similar donation page but with the difference that we are now using Stripe Elements from the \u003Ccode\u003E@stripe\u002Freact-stripe-js\u003C\u002Fcode\u003E package.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThis enables you to make purchase attempts directly from within your website and has flexible styling options to keep it within your styling.\u003C\u002Fp\u003E\n\n\u003Cp\u003ESimilar to before, it is the \u003Ccode\u003EhandleSubmit\u003C\u002Fcode\u003E closure function from the \u003Ccode\u003Ecomponents\u002FElementsForm.tsx\u003C\u002Fcode\u003E form that will give us the most information on what is happening:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight typescript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EhandleSubmit\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EReact\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EFormEventHandler\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EHTMLFormElement\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ee\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Ee\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EpreventDefault\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Abort if form isn't valid\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ee\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcurrentTarget\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EreportValidity\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E())\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EsetPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Eprocessing\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Create a PaymentIntent with the specified amount.\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EfetchPostJSON\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E\u002Fapi\u002Fpayment_intents\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"na\"\u003Eamount\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Einput\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcustomDonation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EsetPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EstatusCode\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003EsetPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003EsetErrorMessage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emessage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n      \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Get a reference to a mounted CardElement. Elements knows how\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F to find your CardElement because there can only ever be one of\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F each type of element.\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EcardElement\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eelements\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EgetElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ECardElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Use your card Element with other Stripe.js APIs\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EpaymentIntent\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Estripe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EconfirmCardPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eclient_secret\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"na\"\u003Epayment_method\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n          \u003Cspan class=\"na\"\u003Ecard\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EcardElement\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"na\"\u003Ebilling_details\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Einput\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcardholderName\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003EsetPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E({\u003C\u002Fspan\u003E \u003Cspan class=\"na\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E})\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003EsetErrorMessage\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Emessage\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E??\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003EAn unknown error occured\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EpaymentIntent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"nx\"\u003EsetPayment\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EpaymentIntent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EThe API call code it uses to authorize the checkout session comes from \u003Ccode\u003Epages\u002Fapi\u002Fpayment_intents\u002F*.ts\u003C\u002Fcode\u003E where \u003Ccode\u003E*\u003C\u002Fcode\u003E refers to any of the three files that help out here.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIf we fill out the details similar to before with the same test card and click \u003Ccode\u003EDonate $x\u003C\u002Fcode\u003E, you will see that the entire payment process happens on the page as opposed to running through the redirects.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--hg50GUHb--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-4-elements.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--hg50GUHb--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-4-elements.png%3Fraw%3Dtrue\" alt=\"Elements form\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EElements form\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--hP-FcD3W--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-5-elements-result.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--hP-FcD3W--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-5-elements-result.png%3Fraw%3Dtrue\" alt=\"Elements paid\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EElements paid\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"exploring-the-shopping-cart\" href=\"#exploring-the-shopping-cart\"\u003E\n  \u003C\u002Fa\u003E\n  Exploring the Shopping Cart\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EAs for the final option of \u003Cstrong\u003EUse Shopping Cart\u003C\u002Fstrong\u003E, you'll see the example gives us a lovely set of options to add items to a cart, then checkout.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThis actually works by using a package called \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdayhaysoos\u002Fuse-shopping-cart\"\u003Euse-shopping-cart\u003C\u002Fa\u003E which is a delightful package that helps maintain a Stripe shopping cart using React hooks and the related \u003Ca href=\"https:\u002F\u002Fstripe.com\u002Fdocs\u002Fapi\u002Fskus\"\u003Estock keeping units (SKUs)\u003C\u002Fa\u003E used in Stripe.\u003C\u002Fp\u003E\n\n\u003Cblockquote\u003E\n\u003Cp\u003EIn real-world usage, you can add the products through the Stripe Dashboard.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EThis example follows a similar route to the basic checkout example. If you add some items to the cart and checkout, you will be redirected to Stripe Checkout to complete to order and follow a similar redirect path.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--RJ7imBSj--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-6-shopping-cart.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--RJ7imBSj--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-6-shopping-cart.png%3Fraw%3Dtrue\" alt=\"Shopping cart page\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EShopping cart page\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cp\u003EThe difference in this cart, however, is that your items will show on the checkout page!\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--y5oRIPcC--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-7-shopping-cart-checkout.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--y5oRIPcC--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-7-shopping-cart-checkout.png%3Fraw%3Dtrue\" alt=\"Checkout with shopping cart\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003ECheckout with shopping cart\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"see-the-payments-in-the-dashboard\" href=\"#see-the-payments-in-the-dashboard\"\u003E\n  \u003C\u002Fa\u003E\n  See the payments in the dashboard\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIf you head to the \u003Cstrong\u003EPayments\u003C\u002Fstrong\u003E section of your Stripe Dashboard, you will be able to confirm the test payments we made.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--0obybXfx--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-8-payments-stripe-dashboard.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--0obybXfx--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-8-payments-stripe-dashboard.png%3Fraw%3Dtrue\" alt=\"Payments in the dashboard\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EPayments in the dashboard\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"deploying-to-vercel\" href=\"#deploying-to-vercel\"\u003E\n  \u003C\u002Fa\u003E\n  Deploying to Vercel\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIf you have not already, install Vercel using \u003Ccode\u003Enpm i -g vercel\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003ENow, simply run \u003Ccode\u003Evercel\u003C\u002Fcode\u003E from the root of the application and follow the prompts.\u003C\u002Fp\u003E\n\n\u003Cblockquote\u003E\n\u003Cp\u003EThe above requires you to have a Vercel account setup.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EOnce this is done, you will have a link to the live website! The battle, however, is not over yet. If you try to run the checkout from here, your Developer Tools console will inform you that the API keys are \u003Cstrong\u003Enot\u003C\u002Fstrong\u003E set.\u003C\u002Fp\u003E\n\n\u003Cp\u003EWe need to now add our keys to Vercel.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"creating-the-webhook-in-stripe\" href=\"#creating-the-webhook-in-stripe\"\u003E\n  \u003C\u002Fa\u003E\n  Creating the webhook in Stripe\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EIn order to capture webhooks in our production app, we need to create a webhook URL in the Stripe Dashboard. It will look something like \u003Ccode\u003Ehttps:\u002F\u002Fyour-url.your-account.vercel.app\u002Fapi\u002Fwebhooks\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--3qWASptx--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-9-creating-the-webhook.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--3qWASptx--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-9-creating-the-webhook.png%3Fraw%3Dtrue\" alt=\"Creating a production webhook\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003ECreating a production webhook\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cp\u003EOnce created in the dashboard, grab the \u003Cstrong\u003ESigning Secret\u003C\u002Fstrong\u003E and get ready to add this to Vercel.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"adding-environment-variables\" href=\"#adding-environment-variables\"\u003E\n  \u003C\u002Fa\u003E\n  Adding Environment Variables\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EThere will be a link to the settings for your application given back on terminal (something like \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fvercel.com\u002F\"\u003Ehttps:\u002F\u002Fvercel.com\u002F\u003C\u002Fa\u003E\u002F\u002Fsettings\u003C\u002Fstrong\u003E).\u003C\u002Fp\u003E\n\n\u003Cp\u003EHead to this link and select \u003Cstrong\u003EEnvironment Variables\u003C\u002Fstrong\u003E from the sidebar. From here, we want to add back in our variables using what we had from \u003Ccode\u003E.env.local\u003C\u002Fcode\u003E in our project, only replace the \u003Ccode\u003ESTRIPE_WEBHOOK_SECRET\u003C\u002Fcode\u003E with the actual link we created in the section before.\u003C\u002Fp\u003E\n\n\u003Cp\u003EOnce these values have been filled out, run \u003Ccode\u003Evercel --prod\u003C\u002Fcode\u003E from the terminal once again from the root directory of the repo to re-deploy the app so that the new environment variables take place.\u003C\u002Fp\u003E\n\n\u003Cp\u003EHead to your URL now, run through one of the flows we described during this post and you are done. Congratulations!\u003C\u002Fp\u003E\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--E9ssTAbY--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-10-production-success.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--E9ssTAbY--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-10-production-success.png%3Fraw%3Dtrue\" alt=\"Production Example Payment\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EProduction Example Payment\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cfigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--Ju6BDBXd--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-11-production-payment-on-dashboard.png%3Fraw%3Dtrue\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--Ju6BDBXd--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\u002Fhttps:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-11-production-payment-on-dashboard.png%3Fraw%3Dtrue\" alt=\"Production payment on the Stripe Dashboard\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cfigcaption\u003EProduction payment on the Stripe Dashboard\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"conclusion\" href=\"#conclusion\"\u003E\n  \u003C\u002Fa\u003E\n  Conclusion\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIn summary, we have looked today at setting up React 17 and TypeScript 4.x in a Nextjs 10 application and event taken it to production using Vercel to host the live website with the ability to accept payments.\u003C\u002Fp\u003E\n\n\u003Cp\u003EMost of these example API routes and implementations from the app can be re-used in the real-world for your own projects.\u003C\u002Fp\u003E\n\n\u003Cp\u003EStripe + Vercel = Greatness. Happy hacking!\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"resources-and-further-reading\" href=\"#resources-and-further-reading\"\u003E\n  \u003C\u002Fa\u003E\n  Resources and further reading\n\u003C\u002Fh2\u003E\n\n\u003Col\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fnextjs-typescript-react-stripe-js\"\u003EBase Stripe repo\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fnextjs-typescript-react-stripe-js\"\u003EForked repo\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Flocate-api-keys-in-the-dashboard#:~:text=Users%20with%20Administrator%20permissions%20can,and%20clicking%20on%20API%20Keys.&amp;text=If%20you%20have%20already%20enabled,one%20or%20more%20hardware%20security%E2%80%A6\"\u003ELocating API keys in Stripe\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\"\u003EStripe API Keys link\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fstripe.com\u002Fdocs\u002Ftesting\"\u003EStripe test cards\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fvercel.com\"\u003EVercel\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwith-stripe-typescript-app-ten.vercel.app\u002F\"\u003EProduction URL\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fwith-stripe-typescript-nextjs-app\"\u003ECompleted Project\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\n\u003Cp\u003E\u003Cem\u003EImage credit: \u003Ca href=\"https:\u002F\u002Funsplash.com\u002F@sam_truong\"\u003ESam Dan Truong\u003C\u002Fa\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Cem\u003EOriginally posted on my \u003Ca href=\"https:\u002F\u002Fblog.dennisokeeffe.com\u002Fblog\u002F2020-11-07-nextjs-10-with-stripe\u002F\"\u003Eblog\u003C\u002Fa\u003E. Follow me on Twitter for more hidden gems \u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Fdennisokeeffe92\"\u003E@dennisokeeffe92\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\n";b.body_markdown="\nOver my previous posts, I have been exploring some of the neat things about Next.js 10 and using Vercel as a host.\n\nToday we are going to show how you can build out your next store or start financing your own dreams.\n\nWe will use a Stripe + Nextjs starter template, upgrade React to version 17, TypeScript to version 4 and deploy the final working application to Vercel via the CLI.\n\n_I tell you what, I sure am ready to leave me 9-5 job._\n\n## Prerequisites and requirements\n\n1. Have a Stripe account.\n2. Have your [API keys](https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Flocate-api-keys-in-the-dashboard#:~:text=Users%20with%20Administrator%20permissions%20can,and%20clicking%20on%20API%20Keys.&text=If%20you%20have%20already%20enabled,one%20or%20more%20hardware%20security%E2%80%A6) ready.\n3. A [Vercel](https:\u002F\u002Fvercel.com) account.\n\n## Getting started\n\nThanks to `create-next-app`, we already have an example that we can get started with and explore!\n\nRun the following to create a Next.js example app in the folder `with-stripe-typescript-app`:\n\n```s\n# Create Stripe TypeScript example\nnpx create-next-app --example with-stripe-typescript with-stripe-typescript-app\n```\n\nChange into the newly-created directory.\n\nOptionally, We are going to make some changes to this template for the sake of bringing TypeScript and React things up to version 4 and 17 respectively!\n\n```s\n# Move TypeScript from v3 -\u003E v4, React from v16 -\u003E v17\nnpm install react@latest react-dom@latest\n# Update types\nnpm install --save-dev typescript@latest @types\u002Freact@latest\n```\n\nIn my case, this brought TypeScript up to v4.0.5 and React + ReactDOM to v17.0.1. Note that in future, breaking changes could break the app.\n\n\u003E You could check for the other packages as well (Stripe, etc.) but I will leave them for the sake of working with what is currently there.\n\n## Preparing the app\n\nBefore we go too deep into exploration, we need to add in your [Stripe API Keys](https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys). In my case, I will just use the test keys from the dashboard.\n\nAs for the webhook secret, this comes from the [Stripe CLI](https:\u002F\u002Fstripe.com\u002Fdocs\u002Fstripe-cli). Follow the instructions on the link to install.\n\nAfter installing the Stripe CLI, run `stripe login` and log into your account (this will open up the browser to confirm).\n\nNext, run `stripe listen --forward-to localhost:\u003Cyour-port-likely-3000\u003E\u002Fapi\u002Fwebhooks`. This will give you back a webhook secret you can use.\n\nFrom the root of the project, run `cp .env.local.example` to `.env.local.example`.\n\nInside, you'll fine some environment variables that we need to update:\n\n```s\n# Stripe keys\n# https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=\u003Cyour-stripe-pk\u003E\nSTRIPE_SECRET_KEY=\u003Cyour-stripe-sk\u003E\nSTRIPE_PAYMENT_DESCRIPTION='Software development services'\n# https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks\u002Fsignatures\nSTRIPE_WEBHOOK_SECRET=\u003Cyour-webhook-secret-from-stripe-cli\u003E\n```\n\n## Exploring the app\n\nTo start the app, run `npm run dev` in the terminal.\n\nHead to **http:\u002F\u002Flocalhost:3000** and you'll be faced with the following screen:\n\n![Localhost running](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-1-localhost-nextjs-app.png?raw=true)\n\u003Cfigcaption\u003ELocalhost running\u003C\u002Ffigcaption\u003E\n\nThis page allows us to run three examples:\n\n1. Donation using Stripe Checkout.\n2. Donation using Stripe Elements.\n3. Using the Shopping Cart.\n\nLet's explore the code for each page.\n\n## Donate with Stripe Checkout\n\nChecking out the first option with **Donation with Checkout**.\n\nThe code for how this page works can be found at `pages\u002Fdonate-with-checkout.tsx`.\n\n```ts\nimport { NextPage } from \"next\"\nimport Layout from \"..\u002Fcomponents\u002FLayout\"\n\nimport CheckoutForm from \"..\u002Fcomponents\u002FCheckoutForm\"\n\nconst DonatePage: NextPage = () =\u003E {\n  return (\n    \u003CLayout title=\"Donate with Checkout | Next.js + TypeScript Example\"\u003E\n      \u003Cdiv className=\"page-container\"\u003E\n        \u003Ch1\u003EDonate with Checkout\u003C\u002Fh1\u003E\n        \u003Cp\u003EDonate to our project 💖\u003C\u002Fp\u003E\n        \u003CCheckoutForm \u002F\u003E\n      \u003C\u002Fdiv\u003E\n    \u003C\u002FLayout\u003E\n  )\n}\n\nexport default DonatePage\n```\n\n\u003E All the future examples can be found at `pages\u002Fpath\u002Fto\u002Froute`. I won't be touching deeper on the page entry points moving further.\n\nWithin that form, we can see the checkout form in `components\u002FCheckoutForm`.\n\nWhile I won't go too deep into each and every piece of information here, if we look at the code and see the `handleSubmit` closure function, we can see where most the important information comes from:\n\n```ts\nconst handleSubmit: React.FormEventHandler\u003CHTMLFormElement\u003E = async e =\u003E {\n  e.preventDefault()\n  setLoading(true)\n  \u002F\u002F Create a Checkout Session.\n  const response = await fetchPostJSON(\"\u002Fapi\u002Fcheckout_sessions\", {\n    amount: input.customDonation,\n  })\n\n  if (response.statusCode === 500) {\n    console.error(response.message)\n    return\n  }\n\n  \u002F\u002F Redirect to Checkout.\n  const stripe = await getStripe()\n  const { error } = await stripe!.redirectToCheckout({\n    \u002F\u002F Make the id field from the Checkout Session creation API response\n    \u002F\u002F available to this file, so you can provide it as parameter here\n    \u002F\u002F instead of the {{CHECKOUT_SESSION_ID}} placeholder.\n    sessionId: response.id,\n  })\n  \u002F\u002F If `redirectToCheckout` fails due to a browser or network\n  \u002F\u002F error, display the localized error message to your customer\n  \u002F\u002F using `error.message`.\n  console.warn(error.message)\n  setLoading(false)\n}\n```\n\nThis code re-directs us to the Stripe Checkout where we can pay with some test cards.\n\nThe API call code it uses to authorize the checkout session comes from `pages\u002Fapi\u002Fcheckout_sessions\u002F*.ts` where `*` refers to any of the three files that help out here.\n\nIf we run through the UI and click on \"donate\" we can see that in action.\n\n![Stripe Checkout](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-2-stripe-checkout.png?raw=true)\n\u003Cfigcaption\u003EStripe Checkout\u003C\u002Ffigcaption\u003E\n\nUsing a [Stripe test card](https:\u002F\u002Fstripe.com\u002Fdocs\u002Ftesting) we can pop in `4242 4242 4242 4242` for the card number, any 3 digits for the CVC and any future date for validating the purchase.\n\nIf we check our terminal, we will see some neat confirmation logs for both the Nextjs app logs and webhook logs:\n\n```s\n# Nextjs App logs\n✅ Success: evt_1Hke6eJV8JMnC8XlhOPbQAy2\n💵 Charge id: ch_1Hke6dJV8JMnC8XltpI9mM15\n✅ Success: evt_1Hke6eJV8JMnC8Xlm2EtO9Cq\n🤷‍♀️ Unhandled event type: payment_method.attached\n✅ Success: evt_1Hke6eJV8JMnC8XlpWp04upc\n🤷‍♀️ Unhandled event type: customer.created\n✅ Success: evt_1Hke6fJV8JMnC8Xl29TUZxrT\n💰 PaymentIntent status: succeeded\n✅ Success: evt_1Hke6fJV8JMnC8XlcTKuetWs\n🤷‍♀️ Unhandled event type: checkout.session.completed\n# Stripe Webhook Logs\n2020-11-07 10:04:59  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:08:46   --\u003E payment_intent.created [evt_id]\n2020-11-07 10:08:46  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:12:33   --\u003E charge.succeeded [evt_id]\n2020-11-07 10:12:33  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:12:34   --\u003E payment_method.attached [evt_1Hke6eJV8JMnC8Xlm2EtO9Cq]\n2020-11-07 10:12:34  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:12:34   --\u003E customer.created [evt_1Hke6eJV8JMnC8XlpWp04upc]\n2020-11-07 10:12:34  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:12:34   --\u003E payment_intent.succeeded [evt_1Hke6fJV8JMnC8Xl29TUZxrT]\n2020-11-07 10:12:34  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n2020-11-07 10:12:34   --\u003E checkout.session.completed [evt_1Hke6fJV8JMnC8XlcTKuetWs]\n2020-11-07 10:12:34  \u003C--  [200] POST http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fwebhooks [evt_id]\n```\n\nThe UI itself will redirect to `\u002Fresult` where the response JSON body will be shown.\n\n![Response on result page](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-3-checkout-result.png?raw=true)\n\u003Cfigcaption\u003EResponse on result page\u003C\u002Ffigcaption\u003E\n\n## Donate with Stripe Elements\n\nIf we return to the home page and select the `Donate with Elements` option, we will come to a similar donation page but with the difference that we are now using Stripe Elements from the `@stripe\u002Freact-stripe-js` package.\n\nThis enables you to make purchase attempts directly from within your website and has flexible styling options to keep it within your styling.\n\nSimilar to before, it is the `handleSubmit` closure function from the `components\u002FElementsForm.tsx` form that will give us the most information on what is happening:\n\n```ts\nconst handleSubmit: React.FormEventHandler\u003CHTMLFormElement\u003E = async (e) =\u003E {\n    e.preventDefault()\n    \u002F\u002F Abort if form isn't valid\n    if (!e.currentTarget.reportValidity()) return\n    setPayment({ status: 'processing' })\n\n    \u002F\u002F Create a PaymentIntent with the specified amount.\n    const response = await fetchPostJSON('\u002Fapi\u002Fpayment_intents', {\n      amount: input.customDonation,\n    })\n    setPayment(response)\n\n    if (response.statusCode === 500) {\n      setPayment({ status: 'error' })\n      setErrorMessage(response.message)\n      return\n    }\n\n    \u002F\u002F Get a reference to a mounted CardElement. Elements knows how\n    \u002F\u002F to find your CardElement because there can only ever be one of\n    \u002F\u002F each type of element.\n    const cardElement = elements!.getElement(CardElement)\n\n    \u002F\u002F Use your card Element with other Stripe.js APIs\n    const { error, paymentIntent } = await stripe!.confirmCardPayment(\n      response.client_secret,\n      {\n        payment_method: {\n          card: cardElement!,\n          billing_details: { name: input.cardholderName },\n        },\n      }\n    )\n\n    if (error) {\n      setPayment({ status: 'error' })\n      setErrorMessage(error.message ?? 'An unknown error occured')\n    } else if (paymentIntent) {\n      setPayment(paymentIntent)\n    }\n  }\n```\n\nThe API call code it uses to authorize the checkout session comes from `pages\u002Fapi\u002Fpayment_intents\u002F*.ts` where `*` refers to any of the three files that help out here.\n\nIf we fill out the details similar to before with the same test card and click `Donate $x`, you will see that the entire payment process happens on the page as opposed to running through the redirects.\n\n![Elements form](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-4-elements.png?raw=true)\n\u003Cfigcaption\u003EElements form\u003C\u002Ffigcaption\u003E\n\n![Elements paid](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-5-elements-result.png?raw=true)\n\u003Cfigcaption\u003EElements paid\u003C\u002Ffigcaption\u003E\n\n## Exploring the Shopping Cart\n\nAs for the final option of **Use Shopping Cart**, you'll see the example gives us a lovely set of options to add items to a cart, then checkout.\n\nThis actually works by using a package called [use-shopping-cart](https:\u002F\u002Fgithub.com\u002Fdayhaysoos\u002Fuse-shopping-cart) which is a delightful package that helps maintain a Stripe shopping cart using React hooks and the related [stock keeping units (SKUs)](https:\u002F\u002Fstripe.com\u002Fdocs\u002Fapi\u002Fskus) used in Stripe.\n\n\u003E In real-world usage, you can add the products through the Stripe Dashboard.\n\nThis example follows a similar route to the basic checkout example. If you add some items to the cart and checkout, you will be redirected to Stripe Checkout to complete to order and follow a similar redirect path.\n\n![Shopping cart page](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-6-shopping-cart.png?raw=true)\n\u003Cfigcaption\u003EShopping cart page\u003C\u002Ffigcaption\u003E\n\nThe difference in this cart, however, is that your items will show on the checkout page!\n\n![Checkout with shopping cart](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-7-shopping-cart-checkout.png?raw=true)\n\u003Cfigcaption\u003ECheckout with shopping cart\u003C\u002Ffigcaption\u003E\n\n## See the payments in the dashboard\n\nIf you head to the **Payments** section of your Stripe Dashboard, you will be able to confirm the test payments we made.\n\n![Payments in the dashboard](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-8-payments-stripe-dashboard.png?raw=true)\n\u003Cfigcaption\u003EPayments in the dashboard\u003C\u002Ffigcaption\u003E\n\n## Deploying to Vercel\n\nIf you have not already, install Vercel using `npm i -g vercel`.\n\nNow, simply run `vercel` from the root of the application and follow the prompts.\n\n\u003E The above requires you to have a Vercel account setup.\n\nOnce this is done, you will have a link to the live website! The battle, however, is not over yet. If you try to run the checkout from here, your Developer Tools console will inform you that the API keys are **not** set.\n\nWe need to now add our keys to Vercel.\n\n### Creating the webhook in Stripe\n\nIn order to capture webhooks in our production app, we need to create a webhook URL in the Stripe Dashboard. It will look something like `https:\u002F\u002Fyour-url.your-account.vercel.app\u002Fapi\u002Fwebhooks`.\n\n![Creating a production webhook](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-9-creating-the-webhook.png?raw=true)\n\u003Cfigcaption\u003ECreating a production webhook\u003C\u002Ffigcaption\u003E\n\nOnce created in the dashboard, grab the **Signing Secret** and get ready to add this to Vercel.\n\n### Adding Environment Variables\n\nThere will be a link to the settings for your application given back on terminal (something like **https:\u002F\u002Fvercel.com\u002F\u003Cyour-account\u003E\u002F\u003Capp-name\u003E\u003C\u002Fapp-name\u003E\u002Fsettings**).\n\nHead to this link and select **Environment Variables** from the sidebar. From here, we want to add back in our variables using what we had from `.env.local` in our project, only replace the `STRIPE_WEBHOOK_SECRET` with the actual link we created in the section before.\n\nOnce these values have been filled out, run `vercel --prod` from the terminal once again from the root directory of the repo to re-deploy the app so that the new environment variables take place.\n\nHead to your URL now, run through one of the flows we described during this post and you are done. Congratulations!\n\n![Production Example Payment](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-10-production-success.png?raw=true)\n\u003Cfigcaption\u003EProduction Example Payment\u003C\u002Ffigcaption\u003E\n\n![Production payment on the Stripe Dashboard](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fdennisokeeffe-blog\u002Fblob\u002Fmaster\u002Fcontent\u002Fassets\u002F2020-11-07-11-production-payment-on-dashboard.png?raw=true)\n\u003Cfigcaption\u003EProduction payment on the Stripe Dashboard\u003C\u002Ffigcaption\u003E\n\n## Conclusion\n\nIn summary, we have looked today at setting up React 17 and TypeScript 4.x in a Nextjs 10 application and event taken it to production using Vercel to host the live website with the ability to accept payments.\n\nMost of these example API routes and implementations from the app can be re-used in the real-world for your own projects.\n\nStripe + Vercel = Greatness. Happy hacking!\n\n## Resources and further reading\n\n1. [Base Stripe repo](https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fnextjs-typescript-react-stripe-js)\n2. [Forked repo](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fnextjs-typescript-react-stripe-js)\n3. [Locating API keys in Stripe](https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Flocate-api-keys-in-the-dashboard#:~:text=Users%20with%20Administrator%20permissions%20can,and%20clicking%20on%20API%20Keys.&text=If%20you%20have%20already%20enabled,one%20or%20more%20hardware%20security%E2%80%A6)\n4. [Stripe API Keys link](https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys)\n5. [Stripe test cards](https:\u002F\u002Fstripe.com\u002Fdocs\u002Ftesting)\n6. [Vercel](https:\u002F\u002Fvercel.com)\n7. [Production URL](https:\u002F\u002Fwith-stripe-typescript-app-ten.vercel.app\u002F)\n8. [Completed Project](https:\u002F\u002Fgithub.com\u002Fokeeffed\u002Fwith-stripe-typescript-nextjs-app)\n\n_Image credit: [Sam Dan Truong](https:\u002F\u002Funsplash.com\u002F@sam_truong)_\n\n_Originally posted on my [blog](https:\u002F\u002Fblog.dennisokeeffe.com\u002Fblog\u002F2020-11-07-nextjs-10-with-stripe\u002F). Follow me on Twitter for more hidden gems [@dennisokeeffe92](https:\u002F\u002Ftwitter.com\u002Fdennisokeeffe92)._";b.user={name:"Dennis O'Keeffe",username:e,twitter_username:"dennisokeeffe92",github_username:e,website_url:"https:\u002F\u002Fdennisokeeffe.com",profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--bfhEutfl--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F108053\u002Fd5aa6b0b-37b3-460a-89aa-deec3e625f80.jpeg",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--sXaHisfL--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F108053\u002Fd5aa6b0b-37b3-460a-89aa-deec3e625f80.jpeg"};return {data:[{}],fetch:{"data-v-25febe66:0":{article:b}},mutations:[["SET_CURRENT_ARTICLE",b]]}}(null,{},5,"2020-11-07T00:42:46Z","okeeffed")));