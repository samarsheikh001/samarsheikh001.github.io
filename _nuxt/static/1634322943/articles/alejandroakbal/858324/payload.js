__NUXT_JSONP__("/articles/alejandroakbal/858324", (function(a,b,c,d,e){c.type_of="article";c.id=858324;c.title="How to build a free plan in Laravel Spark";c.description="Introduction   I'm going to explain how to build a free plan for your Laravel Spark Next...";c.readable_publish_date="Oct 10";c.slug="how-to-build-a-free-plan-in-laravel-spark-41c5";c.path="\u002Falejandroakbal\u002Fhow-to-build-a-free-plan-in-laravel-spark-41c5";c.url="https:\u002F\u002Fdev.to\u002Falejandroakbal\u002Fhow-to-build-a-free-plan-in-laravel-spark-41c5";c.comments_count=0;c.public_reactions_count=d;c.collection_id=b;c.published_timestamp=a;c.positive_reactions_count=d;c.cover_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--flQd7cmY--\u002Fc_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Farticles\u002Fd85dz24php0hnsobxcmy.png";c.social_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--_8KN3ZXZ--\u002Fc_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Farticles\u002Fd85dz24php0hnsobxcmy.png";c.canonical_url="https:\u002F\u002Fblog.akbal.dev\u002Fhow-to-build-a-free-plan-in-laravel-spark";c.created_at=a;c.edited_at=b;c.crossposted_at=b;c.published_at=a;c.last_comment_at=a;c.reading_time_minutes=3;c.tag_list="tutorial, laravel, stripe, paddle";c.tags=["tutorial","laravel","stripe","paddle"];c.body_html="\u003Ch2\u003E\n  \u003Ca name=\"introduction\" href=\"#introduction\"\u003E\n  \u003C\u002Fa\u003E\n  Introduction\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EI'm going to explain how to build a free plan for your Laravel Spark Next application.\u003C\u002Fp\u003E\n\n\u003Cp\u003EI will be using Paddle as the payment gateway, but the steps are almost identical with Stripe.\u003C\u002Fp\u003E\n\n\u003Cp\u003EBest of all? No credit card required for the free plan.\u003C\u002Fp\u003E\n\n\n\u003Chr\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"before-we-start\" href=\"#before-we-start\"\u003E\n  \u003C\u002Fa\u003E\n  Before we start\n\u003C\u002Fh2\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"preface\" href=\"#preface\"\u003E\n  \u003C\u002Fa\u003E\n  Preface\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EYou should know that Laravel Spark is built on top of Laravel Cashier, so know that the process is very similar with both.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"requirements\" href=\"#requirements\"\u003E\n  \u003C\u002Fa\u003E\n  Requirements\n\u003C\u002Fh3\u003E\n\n\u003Cul\u003E\n\u003Cli\u003ELaravel 8 with Spark Next\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\n\u003Chr\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"laravel-spark-installation\" href=\"#laravel-spark-installation\"\u003E\n  \u003C\u002Fa\u003E\n  Laravel Spark installation\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EBefore starting the tutorial, you should have followed the \u003Ca href=\"https:\u002F\u002Fspark.laravel.com\u002Fdocs\u002F1.x\u002Finstallation.html\"\u003Eofficial installation guide\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\n\u003Chr\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"laravel-spark-plan-configuration\" href=\"#laravel-spark-plan-configuration\"\u003E\n  \u003C\u002Fa\u003E\n  Laravel Spark plan configuration\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ELet's imagine that we are building a new application which offers a free plan and a paid plan.\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003EThe \u003Cstrong\u003E\"Free\" plan\u003C\u002Fstrong\u003E will have a limit of \u003Cstrong\u003E1 project\u003C\u002Fstrong\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EThe \u003Cstrong\u003E\"Paid\" plan\u003C\u002Fstrong\u003E will have a limit of \u003Cstrong\u003E5 projects\u003C\u002Fstrong\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EWe need to configure both plans in the \u003Ccode\u003Econfig\u002Fspark.php\u003C\u002Fcode\u003E file, like so:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight php\"\u003E\u003Ccode\u003E\n\u003Cspan class=\"c1\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"s1\"\u003E'plans'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'name'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'Free'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'short_description'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'This is the free plan'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"c1\"\u003E\u002F\u002F Random _(not used by other plans)_ ID\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'monthly_id'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'features'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n              \u003Cspan class=\"s1\"\u003E'1 Project'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'options'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n              \u003Cspan class=\"s1\"\u003E'projects'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n          \u003Cspan class=\"c1\"\u003E\u002F\u002F IMPORTANT\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'archived'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'name'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'Paid'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'short_description'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'This is the paid plan'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'monthly_id'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E999990\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'yearly_id'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E999991\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'yearly_incentive'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'Save 20%!'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'features'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n              \u003Cspan class=\"s1\"\u003E'5 Projects'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'options'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\n              \u003Cspan class=\"s1\"\u003E'projects'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n          \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n          \u003Cspan class=\"s1\"\u003E'archived'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EAs you can see, the limits are actually set in the \u003Ccode\u003Eoptions\u003C\u002Fcode\u003E array.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIt's important that the \"Free\" plan is set to \u003Ccode\u003Earchived\u003C\u002Fcode\u003E to prevent users from selecting that plan on the billing page.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThe \"Free\" plan has to have a random \u003Ccode\u003Emonthly_id\u003C\u002Fcode\u003E, so the plan can be used internally.\u003Cbr\u003E\n\u003Cem\u003EIt doesn't need to be a working product ID, nor do you have to create it on Paddle\u002FStripe\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\n\u003Chr\u003E\n\u003Ch2\u003E\n  \u003Ca name=\"modify-user-model\" href=\"#modify-user-model\"\u003E\n  \u003C\u002Fa\u003E\n  Modify User model\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ENow that we have created a \"Free\" plan, we need to modify the \u003Ccode\u003EUser\u003C\u002Fcode\u003E model to add a \u003Ccode\u003EgetPlan\u003C\u002Fcode\u003E method.\u003C\u002Fp\u003E\n\n\u003Cp\u003EThis method will get the current users plan, \u003Cstrong\u003Eor the \"Free\" plan if the user has no active plan\u003C\u002Fstrong\u003E.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight php\"\u003E\u003Ccode\u003E\n\u003Cspan class=\"c1\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EgetPlan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nv\"\u003E$this\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003EsparkPlan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E!==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n            \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"c1\"\u003E\u002F\u002F Fallback to \"Free\" plan\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003ESpark\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E::\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003Eplans\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E'user'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003EfirstWhere\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E'name'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'='\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s1\"\u003E'Free'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ENote: As mentioned in the steps before, you need to add a \u003Ccode\u003Emonthly_id\u003C\u002Fcode\u003E to the \"Free\" plan, otherwise it will be skipped by the \u003Ccode\u003ESpark::plans('user')\u003C\u002Fcode\u003E call and will not be found.\u003Cbr\u003E\nThe ID can be random, don't worry.\u003C\u002Fp\u003E\n\n\u003Chr\u003E\n\u003Ch2\u003E\n  \u003Ca name=\"getting-the-users-plan\" href=\"#getting-the-users-plan\"\u003E\n  \u003C\u002Fa\u003E\n  Getting the User's plan\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EThrough your application you can access a user plan and limits like so:\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight php\"\u003E\u003Ccode\u003E\u003Cspan class=\"nv\"\u003E$user\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EUser\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E::\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003Efind\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nv\"\u003E$user\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003EgetPlan\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F \"Free\"\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nv\"\u003E$plan\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eoptions\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E'projects'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 1\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\n\u003Chr\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"end\" href=\"#end\"\u003E\n  \u003C\u002Fa\u003E\n  End\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EAs you can see, what we actually do is fallback to the \"Free\" plan if the user has no active plan.\u003C\u002Fp\u003E\n\n\u003Cp\u003EAnd this plan doesn't actually go through the payment process, so you don't need to ask the users with a credit card.\u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"selfpromotion\" href=\"#selfpromotion\"\u003E\n  \u003C\u002Fa\u003E\n  Self-promotion\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EIf you have found this useful, then you should follow me, I will be posting more interesting content! ðŸ¥°\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Fgithub\"\u003EGitHub\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Ftwitter\"\u003ETwitter\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Fdev.to\"\u003EDev.to\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EOr support me financially. ðŸ’¸\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Fgithub\u002Fsponsor\"\u003EGitHub Sponsors\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Fliberapay\"\u003ELiberaPay\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fredirect.akbal.dev\u002Fpaypal\"\u003EPayPal\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"conclusion\" href=\"#conclusion\"\u003E\n  \u003C\u002Fa\u003E\n  Conclusion\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003ECongratulations, today you have learned how to build a free plan in Laravel Spark.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Cstrong\u003ELet me know if the tutorial was useful to you in the comments!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\n";c.body_markdown="## Introduction\n\nI'm going to explain how to build a free plan for your Laravel Spark Next application.\n\nI will be using Paddle as the payment gateway, but the steps are almost identical with Stripe.\n\nBest of all? No credit card required for the free plan.\n\n---\n\n## Before we start\n\n### Preface\n\nYou should know that Laravel Spark is built on top of Laravel Cashier, so know that the process is very similar with both.\n\n### Requirements\n\n- Laravel 8 with Spark Next\n\n---\n\n## Laravel Spark installation\n\nBefore starting the tutorial, you should have followed the [official installation guide](https:\u002F\u002Fspark.laravel.com\u002Fdocs\u002F1.x\u002Finstallation.html).\n\n---\n\n## Laravel Spark plan configuration\n\nLet's imagine that we are building a new application which offers a free plan and a paid plan.\n\n- The **\"Free\" plan** will have a limit of **1 project**.\n- The **\"Paid\" plan** will have a limit of **5 projects**.\n\nWe need to configure both plans in the `config\u002Fspark.php` file, like so:\n\n```php\n\n\u002F\u002F ...\n\n  'plans' =\u003E [\n      [\n          'name' =\u003E 'Free',\n          'short_description' =\u003E 'This is the free plan',\n          \u002F\u002F Random _(not used by other plans)_ ID\n          'monthly_id' =\u003E 1000,\n          'features' =\u003E [\n              '1 Project',\n          ],\n          'options' =\u003E [\n              'projects' =\u003E 1,\n          ],\n          \u002F\u002F IMPORTANT\n          'archived' =\u003E true,\n      ],\n      [\n          'name' =\u003E 'Paid',\n          'short_description' =\u003E 'This is the paid plan',\n          'monthly_id' =\u003E 999990,\n          'yearly_id' =\u003E 999991,\n          'yearly_incentive' =\u003E 'Save 20%!',\n          'features' =\u003E [\n              '5 Projects',\n          ],\n          'options' =\u003E [\n              'projects' =\u003E 5,\n          ],\n          'archived' =\u003E false,\n      ],\n  ]\n\n\u002F\u002F ...\n\n```\n\nAs you can see, the limits are actually set in the `options` array.\n\nIt's important that the \"Free\" plan is set to `archived` to prevent users from selecting that plan on the billing page.\n\nThe \"Free\" plan has to have a random `monthly_id`, so the plan can be used internally.\n_It doesn't need to be a working product ID, nor do you have to create it on Paddle\u002FStripe_.\n\n---\n\n## Modify User model\n\nNow that we have created a \"Free\" plan, we need to modify the `User` model to add a `getPlan` method.\n\nThis method will get the current users plan, **or the \"Free\" plan if the user has no active plan**.\n\n```php\n\n\u002F\u002F ...\n\n    public function getPlan()\n    {\n        $plan = $this-\u003EsparkPlan();\n\n        if ($plan !== null) {\n            return $plan;\n        }\n\n        \u002F\u002F Fallback to \"Free\" plan\n        $plan = Spark::plans('user')-\u003EfirstWhere('name', '=', 'Free');\n\n        return $plan;\n    }\n\n\u002F\u002F ...\n\n```\n\nNote: As mentioned in the steps before, you need to add a `monthly_id` to the \"Free\" plan, otherwise it will be skipped by the `Spark::plans('user')` call and will not be found.\nThe ID can be random, don't worry.\n\n---\n\n## Getting the User's plan\n\nThrough your application you can access a user plan and limits like so:\n\n```php\n$user = User::find(1);\n\n$plan = $user-\u003EgetPlan();\n\n$plan-\u003Ename; \u002F\u002F \"Free\"\n\n$plan-\u003Eoptions['projects']; \u002F\u002F 1\n```\n\n---\n\n## End\n\nAs you can see, what we actually do is fallback to the \"Free\" plan if the user has no active plan.\n\nAnd this plan doesn't actually go through the payment process, so you don't need to ask the users with a credit card.\n\n\u003C!-- INCLUDE --\u003E\n\n### Self-promotion\n\nIf you have found this useful, then you should follow me, I will be posting more interesting content! ðŸ¥°\n\n- [GitHub](https:\u002F\u002Fredirect.akbal.dev\u002Fgithub)\n- [Twitter](https:\u002F\u002Fredirect.akbal.dev\u002Ftwitter)\n- [Dev.to](https:\u002F\u002Fredirect.akbal.dev\u002Fdev.to)\n\nOr support me financially. ðŸ’¸\n\n- [GitHub Sponsors](https:\u002F\u002Fredirect.akbal.dev\u002Fgithub\u002Fsponsor)\n- [LiberaPay](https:\u002F\u002Fredirect.akbal.dev\u002Fliberapay)\n- [PayPal](https:\u002F\u002Fredirect.akbal.dev\u002Fpaypal)\n\n\u003C!-- \u002FINCLUDE --\u003E\n\n### Conclusion\n\nCongratulations, today you have learned how to build a free plan in Laravel Spark.\n\n**Let me know if the tutorial was useful to you in the comments!**\n";c.user={name:"Alejandro Akbal",username:"alejandroakbal",twitter_username:e,github_username:e,website_url:"https:\u002F\u002Fakbal.dev",profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--qn0BKUVV--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F287309\u002Fcb6409a4-498f-4eef-8d00-f83ed3b757ee.png",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--pyHqFxhM--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F287309\u002Fcb6409a4-498f-4eef-8d00-f83ed3b757ee.png"};return {data:[{}],fetch:{"data-v-25febe66:0":{article:c}},mutations:[["SET_CURRENT_ARTICLE",c]]}}("2021-10-10T11:20:23Z",null,{},5,"AlejandroAkbal")));