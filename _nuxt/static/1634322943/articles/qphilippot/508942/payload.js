__NUXT_JSONP__("/articles/qphilippot/508942", (function(a,b,c,d,e,f){b.type_of="article";b.id=508942;b.title="Faites vos propres animations en JS";b.description="Dans cet article, nous allons comparer plusieurs m√©thodes permettant de faire des animations en JavaS...";b.readable_publish_date="Nov 11 '20";b.slug="faites-vos-propres-animations-en-js-34ok";b.path="\u002Fqphilippot\u002Ffaites-vos-propres-animations-en-js-34ok";b.url=c;b.comments_count=1;b.public_reactions_count=d;b.collection_id=a;b.published_timestamp=e;b.positive_reactions_count=d;b.cover_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--ka1fS9pw--\u002Fc_imagga_scale,f_auto,fl_progressive,h_420,q_66,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F8fwvwo52c7fthktwod45.gif";b.social_image="https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--QwEngXYt--\u002Fc_imagga_scale,f_auto,fl_progressive,h_500,q_66,w_1000\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F8fwvwo52c7fthktwod45.gif";b.canonical_url=c;b.created_at="2020-11-07T15:36:46Z";b.edited_at=a;b.crossposted_at=a;b.published_at=e;b.last_comment_at="2020-11-11T15:24:00Z";b.reading_time_minutes=11;b.tag_list="javascript, webdev, tutorial, french";b.tags=["javascript","webdev","tutorial","french"];b.body_html="\u003Cp\u003EDans cet article, nous allons comparer plusieurs m√©thodes permettant de faire des animations en JavaScript.\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"lapproche-intuitive\" href=\"#lapproche-intuitive\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  L'approche intuitive\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EUne animation, ce n'est qu'une succession d'images dans le temps. De fait, pour cr√©er une animation, il suffit d'effectuer un rendu √† intervalle r√©gulier. Facile, non ? üòÑ\u003C\u002Fp\u003E\n\n\u003Cp\u003ESi toutefois un exemple √©tait n√©cessaire, animons sans attendre la sc√®ne suivante : un cercle blanc se d√©pla√ßant horizontalement dans un canvas.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ecanvas\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EquerySelector\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Ecanvas\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003E_2PI\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003EMath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EPI\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EsetupCanvas\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EinnerWidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estyle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EinnerWidth\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Epx\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eheight\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EinnerHeight\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estyle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eheight\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EinnerHeight\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Epx\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ectx\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EcanvasElement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EgetContext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E2d\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Ectx\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EstrokeStyle\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Ergba(255, 255, 255, 0.2)\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Ectx\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ElineWidth\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003Ectx\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EfillStyle\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Ergb(255,255,255)\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ectx\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EsetupCanvas\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ecanvas\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\n\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ey\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eduration\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E4000\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"c1\"\u003E\u002F\u002F Rendering loop interval\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F logic of our animation\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eclear\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E((\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eduration\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eduration\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ecanvas\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F draw circle\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Earc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ey\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E30\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003E_2PI\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclosePath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estroke\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003E\u003Cstrong\u003ER√©sultat :\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--1cKEAlSz--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002Fxt0kyiu03lewvksmw5h8.gif\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--1cKEAlSz--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002Fxt0kyiu03lewvksmw5h8.gif\" alt=\"Alt Text\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003ENotez qu'une telle animation aurait tr√®s bien pu √™tre r√©alis√©e en HTML\u002FCSS, et qu'une impl√©mentation reposant sur un canvas peut s'apparenter - selon certains - √† atomiser une mouche avec un bazooka üí£\u003C\u002Fp\u003E\n\n\u003Cp\u003EToutefois, puisque nous allons complexifier nos animations dans la suite de l'article, autant partir sur de bonnes bases !\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"la-boucle-de-rendu\" href=\"#la-boucle-de-rendu\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  La boucle de rendu\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EAvant de g√©rer des animations plus complexes, il semble opportun d'introduire un concept cl√© : la \u003Cstrong\u003Eboucle de rendu\u003C\u002Fstrong\u003E ou rendering loop.\u003C\u002Fp\u003E\n\n\u003Cp\u003EIl s'agit d'un m√©canisme utilis√©e pour \u003Cem\u003Erendre\u003C\u002Fem\u003E notre animation, similaire √† la \u003Cem\u003Eboucle de jeu\u003C\u002Fem\u003E dans le contexte des jeux-vid√©o.\u003C\u002Fp\u003E\n\n\u003Cp\u003EPour gagner en lisibilit√©, nous allons isoler la logique propre au rendu de l'animation dans une m√©thode nomm√©e \u003Ccode\u003Erender\u003C\u002Fcode\u003E.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n \u003Cspan class=\"c1\"\u003E\u002F\u002F logic of our animation\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eclear\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E((\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Enow\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eduration\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eduration\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ecanvas\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ewidth\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F draw circle\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Earc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ey\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E30\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003E_2PI\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclosePath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estroke\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F rendering loop\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ECette modification para√Æt anodine, pourtant nous venons de faire un pas de g√©ant ! üöÄ\u003C\u002Fp\u003E\n\n\u003Cp\u003ENous disposons d√©sormais d'une \u003Cstrong\u003Em√©thode de rendu\u003C\u002Fstrong\u003E \u003Ccode\u003Erender\u003C\u002Fcode\u003E invoqu√©e en boucle, ou pour √™tre plus formel, d'une boucle de rendu.\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"boucle-de-rendu-m%C3%A9thode-de-rendu-quelle-diff%C3%A9rence-\" href=\"#boucle-de-rendu-m%C3%A9thode-de-rendu-quelle-diff%C3%A9rence-\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Boucle de rendu, m√©thode de rendu, quelle diff√©rence ?\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ELes deux entit√©s sont tr√®s li√©es, mais se diff√©rencient par la nature de leur pr√©occupation :\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003ELa \u003Cstrong\u003Em√©thode de rendu\u003C\u002Fstrong\u003E contient la logique propre au rendu de nos objets. Elle r√©pond √† la question : \"Comment g√©rer l'apparence mes objets ?\".\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003ELa \u003Cstrong\u003Eboucle de rendu\u003C\u002Fstrong\u003E contient la logique propre au s√©quen√ßage des rendus. Elle r√©pond √† la question : \"Comment planifier l'affichage de mes objets ?\"\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003ENous le verrons, chacun de ses deux aspects nous expose √† des probl√©matiques diff√©rentes üëç.\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"g%C3%A9rer-le-cycle-de-rendu\" href=\"#g%C3%A9rer-le-cycle-de-rendu\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  G√©rer le cycle de rendu\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EUne fa√ßon de mesurer les performances d'une animation consiste √† analyser son \u003Cstrong\u003Eframe rate\u003C\u002Fstrong\u003E. Le frame rate se mesure en \u003Cem\u003EFPS\u003C\u002Fem\u003E (Frame Per Seconds) et repr√©sente nombre d'images que notre animation affiche par seconde.\u003C\u002Fp\u003E\n\n\u003Cp\u003EPour consid√©rer qu'une animation est fluide, nous consid√©rerons que :\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ELe frame rate doit id√©alement se situer autour des 60 FPS\u003C\u002Fstrong\u003E (soit une image toutes les 16 ms).\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ELe frame rate doit √™tre stable\u003C\u002Fstrong\u003E pour que l'impression de mouvement soit coh√©rente. Une variation soudaine peut entra√Æner une sensation de ralentissement ou de saccade. Passer subitement de 60 fps √†  30 fps provoquera un ressentit g√©n√©ralement plus d√©sagr√©able qu'une animation constante √† 30 fps, bien que son score moyen de fps soit presque 2x plus grand !\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EEn r√©alit√©, le probl√®me est beaucoup plus complexe ! J'ai volontairement simplifi√© pour les besoins de l'article, mais si vous souhaitez en savoir plus sur l'impression de mouvement et le traitement des images, je ne peux que vous recommander cet excellent article ü§ì : \u003Ca href=\"https:\u002F\u002Fpaulbakaus.com\u002Ftutorials\u002Fperformance\u002Fthe-illusion-of-motion\u002F\"\u003Ethe-illusion-of-motion\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EVoici les modifications √† apporter √† notre code pour calculer le frame rate :\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EnbRender\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F every seconds prompt frame-rate, then reset counter\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Efps:\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EnbRender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EnbRender\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F Rendering loop interval\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003EnbRender\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ENotez combien la modification est simple. Gr√¢ce au d√©couplage du code via la m√©thode de rendu, la logique propre au rendu de nos objets n'a pas √©t√© impact√©e üßê.\u003C\u002Fp\u003E\n\n\u003Cp\u003EEn rejouant notre script, on constate que l'animation tourne autour de 60FPS. Si l‚Äôon diminue le d√©lai de notre intervalle (de 16ms √† 10 ms par exemple), la boucle de rendu sera plus souvent √©valu√©e, et l'on obtiendra un frame rate plus √©lev√©e‚Ä¶\u003C\u002Fp\u003E\n\n\u003Cp\u003EEnfin, en th√©orie !\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"limitation-des-m%C3%A9thodes-de-rendues-reposant-sur-un-intervalle\" href=\"#limitation-des-m%C3%A9thodes-de-rendues-reposant-sur-un-intervalle\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Limitation des m√©thodes de rendues reposant sur un intervalle\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EAttention : tous les navigateurs ne se valent pas. La fa√ßon dont ils g√®rent les intervalles peut varier. Google Chrome notamment tire son √©pingle du jeu et minimise l'impact des limitations list√©es ci-apr√®s.\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"intervalles-non-r%C3%A9guliers-et-drift\" href=\"#intervalles-non-r%C3%A9guliers-et-drift\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Intervalles non r√©guliers et drift\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ERien ne garantit que le d√©lai renseign√© un \u003Ccode\u003EsetInterval\u003C\u002Fcode\u003E sera scrupuleusement respect√©. Ce temps ne correspond pas √† \"dans combien de temps le callback sera ex√©cut√©\", mais √† la dur√©e minimale avant que celui-ci soit invoqu√©.\u003C\u002Fp\u003E\n\n\u003Cp\u003ESurpris ? Pourtant, rien de plus logique ! Les navigateurs ex√©cutant le code JS en mono-thread, si le moteur JS est d√©j√† occup√© au moment traiter le code contenu dans notre intervalle, il nous faudra attendre qu'il termine sa t√¢che actuelle avant de s'int√©resser √† notre intervalle.\u003C\u002Fp\u003E\n\n\u003Cp\u003E√Ä chaque it√©ration, notre intervalle peut accumuler du retard. Si bien qu'un intervalle initialis√© au temps 0ms avec 100ms de d√©lais entre chaque it√©ration, pourrait avoir lieu au temps 100...548 ms !\u003C\u002Fp\u003E\n\n\u003Cp\u003EC'est ce d√©phasage que l'on d√©signe par \"drift\".\u003C\u002Fp\u003E\n\n\u003Cp\u003EDans le cadre d'une animation, selon la charge de l'application web, on peut \"perdre des frames\" en cours de route. Cela peut √™tre g√™nant si notre boucle de rendu impl√©mente une partie de la logique m√©tier de l'application.\u003C\u002Fp\u003E\n\n\u003Cp\u003ECet article d√©taille comment les timers JavaScript fonctionnent, et pourquoi ils ne sont pas fiables : \u003Ca href=\"https:\u002F\u002Fjohnresig.com\u002Fblog\u002Fhow-javascript-timers-work\"\u003Ehow-javascript-timers-work\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"des-probl%C3%A8mes-de-performances-historiques\" href=\"#des-probl%C3%A8mes-de-performances-historiques\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Des probl√®mes de performances historiques\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIl y a encore quelques ann√©es il existait une diff√©rence palpable entre les performances d'une animation reposant sur \u003Ccode\u003EsetInterval\u003C\u002Fcode\u003E ou sur les \u003Ccode\u003ErequestAnimationFrame\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EJe ne prends m√™me pas la peine de vous proposer de lien vers un article. Il y en a des centaines. La plupart sont tr√®s bien d√©taill√©s.\u003C\u002Fp\u003E\n\n\u003Cp\u003E‚ö†Ô∏è De nos jours cet √©cart a tendance √† s'estomper. √Ä l'heure o√π j'√©cris cet article, je n'ai pas r√©ussi √† mesurer de diff√©rence significative entre les deux m√©thodes.\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"la-m%C3%A9thode-windowrequestanimationframe\" href=\"#la-m%C3%A9thode-windowrequestanimationframe\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  La m√©thode window.requestAnimationFrame\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EAfin de contourner tous ces probl√®mes, les navigateurs impl√©mentent une m√©thode nomm√©e \u003Ccode\u003ErequestAnimationFrame\u003C\u002Fcode\u003E (parfois abr√©g√©e rAF).\u003C\u002Fp\u003E\n\n\u003Cp\u003EPlut√¥t que de planifier des rendus √† intervalle r√©gulier, nous d√©l√©guons cette responsabilit√© au navigateur. D'un coup d'un seul, nous nous d√©barrassons des probl√®mes li√©s √† la \u003Cstrong\u003Elogique propre au s√©quen√ßage des rendus\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003EParmi les services rendus par les requestAnimationFrame, on peut noter :\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003EElles adaptent le frame rate en fonction de l'√©cran de l'utilisateur. Apr√®s tout, pourquoi s'acharner √† calculer 60 images par seconde si notre installation n'est capable d'en afficher que 50 ?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003ELa boucle de rendu s'arr√™te d√®s que la page n'est plus visible (changement d'onglet, passage en arri√®re-plan, etc). Cela √©vite une consommation inutile de ressources et pr√©serve la batterie des appareils mobiles.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EElles ne reposent pas sur un syst√®me de timer, nous ne rencontrons donc pas de probl√®me de drift.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003ELes images sont calcul√©es les unes √† la suite des autres, on √©vite de tomber dans un goulot d'√©tranglement.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003ESans plus attendre, voyons comment modifier notre boucle de rendu pour utiliser les requestAnimationFrame :\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003ErenderingLoop\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003EnbRender\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F ask a new rendering\u003C\u002Fspan\u003E\n  \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErenderingLoop\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E});\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErenderingLoop\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EC'est tout ? Oui üòå.\u003C\u002Fp\u003E\n\n\u003Cp\u003ENotez (une fois de plus !) que les modifications auraient √©t√©s bien plus complexes si nous n'avions pas pris la peine de s√©parer la \u003Cstrong\u003Eboucle de rendu\u003C\u002Fstrong\u003E et \u003Cstrong\u003Ela m√©thode de rendu\u003C\u002Fstrong\u003E en deux entit√©s distinctes.\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"interagir-avec-une-animation\" href=\"#interagir-avec-une-animation\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Interagir avec une animation\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003EUne bonne animation, √ßa peut √™tre chouette. Mais, une animation avec laquelle on peut interagir, c'est carr√©ment mieux !\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"mettre-en-pause-reprendre-une-animation\" href=\"#mettre-en-pause-reprendre-une-animation\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Mettre en pause \u002F reprendre une animation\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003EIl suffit d'introduire un boolean \u003Ccode\u003EisPlaying\u003C\u002Fcode\u003E indiquant si un rendu doit √™tre effectu√© ou non. Ce n'est pas bien sorcier, toutefois une subtilit√© requiert votre attention. Je vois bien souvent des impl√©mentations comme :\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EisPlaying\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E!==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n         \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003Eou si on utilise des intervalles :\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EisPlaying\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003ESoyez vigilant : suspendre le rendu ne signifie pas interrompre la boucle de rendu. Votre application cessera certes de calculer de nouvelles frames, mais votre boucle de rendu continuera √† tourner dans le vide.\u003C\u002Fp\u003E\n\n\u003Cp\u003ECe n'est pas tr√®s √©l√©gant, et cela peut parfois vous jouer des tours.\u003C\u002Fp\u003E\n\n\u003Cp\u003EVoici comment interrompre proprement la boucle de rendu :\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EisPlaying\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E!==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Epause\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EisPlaying\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eplay\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EisPlaying\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\n\n\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eplay\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n           \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E},\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Epause\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E!==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003EclearInterval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nx\"\u003EanimationIntervalId\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Ch2\u003E\n  \u003Ca name=\"interagir-avec-la-souris-ou-le-clavier\" href=\"#interagir-avec-la-souris-ou-le-clavier\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Interagir avec la souris (ou le clavier)\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ESoit l'animation suivante :\u003Cbr\u003E\n\u003Cem\u003E(Adapt√©e pour les besoins depuis \u003Ca href=\"https:\u002F\u002Fcodepen.io\u002Fnukadelic\u002Fpen\u002FQgQJeK\"\u003Ele benchmark de @nukadelic\u003C\u002Fa\u003E)\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EOn ne va pas rentrer dans le d√©tail de son impl√©mentation. Pour les curieux, jetez un coup d'≈ìil sur le \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fqphilippot\u002Ftuto\u002Ftree\u002Fmaster\u002Fmake-your-own-animation-js\"\u003Erepository git\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--3-wQ6OYf--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F5uxfavmdfxy47d24vm4d.gif\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--3-wQ6OYf--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F5uxfavmdfxy47d24vm4d.gif\" alt=\"Alt Text\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003ENous souhaitons modifier son comportement afin de faire appara√Ætre un cercle rouge √† l'emplacement de la souris. Si le curseur bouge, le cercle se d√©placera en cons√©quence.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E\u002F\u002F Attention : √† ne surtout pas faire !\u003C\u002Fspan\u003E\n\u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Emousemove\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F compute coordinate into canvas\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EgetBoundingClientRect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientX\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eleft\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ey\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientY\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etop\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EfillStyle\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"s2\"\u003Ergba(255,0,0,0.5)\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Earc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ey\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E10\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"mf\"\u003E6.283185\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"kc\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E});\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EHorreur, nos FPS baissent drastiquement ! Tr√®s vite, la page a crash√©e. Je n'ai m√™me pas pu prendre un gif pour illustrer la situation üò¢.\u003C\u002Fp\u003E\n\n\u003Ch2\u003E\n  \u003Ca name=\"analyse-du-probl%C3%A8me\" href=\"#analyse-du-probl%C3%A8me\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Analyse du probl√®me\n\u003C\u002Fh2\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"une-indigestion-d%C3%A9v%C3%A9nements\" href=\"#une-indigestion-d%C3%A9v%C3%A9nements\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Une indigestion d'√©v√©nements\n\u003C\u002Fh3\u003E\n\n\u003Cp\u003EChaque d√©placement du curseur lance un √©v√©nement \u003Ccode\u003Emousemove\u003C\u002Fcode\u003E, et appelle \u003Ccode\u003Erender()\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E\n\n\u003Cp\u003EL'ennui c'est qu'en d√©pla√ßant physiquement votre souris, ce n'est pas un, mais plusieurs centaines d'√©v√©nements qui sont lanc√©s en quelques secondes, et autant de demandes de rendus ! ü§Ø\u003C\u002Fp\u003E\n\n\u003Cp\u003EUne machine id√©ale - disposant d'une capacit√© de calcul et des ressources m√©moire infinies - r√©sisterait √† une telle charge de travail. L'animation serait alors d'une fluidit√© exemplaire. Le frame-rate atteindrait un pic √©quivalent √† plusieurs centaines de FPS.\u003C\u002Fp\u003E\n\n\u003Cp\u003EEn pratique, aucun navigateur n'est capable de suivre la cadence.\u003C\u002Fp\u003E\n\n\u003Cp\u003ELe probl√®me d√©passe le simple cadre des animations : plus le callback associ√© √† un √©v√©nement fr√©quent est complexe, plus l'exp√©rience utilisateur est d√©grad√©e. \u003C\u002Fp\u003E\n\n\u003Ch3\u003E\n  \u003Ca name=\"levent-loop\" href=\"#levent-loop\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  L'Event Loop.\n\u003C\u002Fh3\u003E\n\n\u003Cblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003ELa gestion des √©v√©nements JavaScript est en mono-thread.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\u003Cp\u003EQuand un utilisateur d√©place son curseur, les \u003Ccode\u003Emousemove\u003C\u002Fcode\u003E sont mis dans une file d'attente et trait√© un par un. Dans le cas d'une animation, plusieurs centaines de rendus sont mis en attente.\u003C\u002Fp\u003E\n\n\u003Cp\u003ESi vous souhaitez en apprendre davantage sur l'Event Loop, je recommande cet article : \u003Ca href=\"https:\u002F\u002Ffelixgerschau.com\u002Fjavascript-event-loop-call-stack\"\u003Ehttps:\u002F\u002Ffelixgerschau.com\u002Fjavascript-event-loop-call-stack\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Cem\u003E¬´ Et alors ? Si JavaScript est mono-thread, et qu'il effectue mes rendus un par un, tout devrait fonctionner correctement. Je ne vois pas o√π est le probl√®me ! ¬ª\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003ESupposons que chaque frame requiert 20 ms pour √™tre affich√©e. Puisque le rendu est s√©quentiel, si d√©placer le curseur jette 1000 √©v√©nements \u003Ccode\u003Emousemove\u003C\u002Fcode\u003E, le script commandera le calcul de 1000 frames.\u003C\u002Fp\u003E\n\n\u003Cp\u003ELe programme consacra donc 20 secondes pour retranscrire un mouvement de souris ayant pourtant dur√© moins d'une seconde ! ‚ò†Ô∏è\u003C\u002Fp\u003E\n\n\u003Cp\u003ELe fait que l'ex√©cution du JS soit en mono-thread ne signifie pas qu'il √©volue dans un thread d√©di√©. Loin de l√† !\u003C\u002Fp\u003E\n\n\u003Cp\u003ELe processus responsable de notre JS s'occupe aussi de la r√©activit√© de la page. Noyer le processus (main-thread) aboutira √† une exp√©rience utilisateur d√©grad√©e (le plantage pur et simple de votre page n'est pas exclu).\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FGlossary\u002FMain_thread\"\u003Ehttps:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FGlossary\u002FMain_thread\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Cp\u003EDe fa√ßon g√©n√©rale, d√®s que le temps de rendu est sup√©rieur √† la dur√©e de vie de votre frame, votre animation en p√¢tit. Au mieux elle  saccade (le moteur de rendu \"sacrifie\" des demandes de rendu). \u003C\u002Fp\u003E\n\n\u003Cp\u003EDans le pire des cas l'animation est d√©synchronis√©e, car toutes les demandes de rendu sont ex√©cut√©es. Les interactions de l'utilisateur sont rendues avec un d√©calage d√ª au temps de calcul √©lev√©. Une autre possibilit√© est un m√©lange des deux √† coup de grand \"freeze\" d'√©cran. Rien de bien souhaitable !\u003C\u002Fp\u003E\n\u003Ch2\u003E\n  \u003Ca name=\"solution\" href=\"#solution\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Solution\n\u003C\u002Fh2\u003E\n\n\u003Cp\u003ELors d'une interaction provenant de l'utilisateur, modifiez seulement l'√©tat de vos objets. N'effectuez surtout pas de rendu. C'est le job de la boucle de rendu, et elle le fait tr√®s bien.\u003C\u002Fp\u003E\n\n\u003Cp\u003EDans cet exemple \"modifier l'√©tat de l'objet\" signifier simplement rafra√Æchir les coordonn√©es du cercle.\u003Cbr\u003E\n\u003C\u002Fp\u003E\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\n\u003Cpre class=\"highlight javascript\"\u003E\u003Ccode\u003E\u003Cspan class=\"c1\"\u003E\u002F\u002F rendering method \u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n   \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eradius\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E25\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n   \u003Cspan class=\"c1\"\u003E\u002F\u002F only draws circles with something like that:\u003C\u002Fspan\u003E\n   \u003Cspan class=\"k\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ecircles\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elength\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Earc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ecircle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ecircle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E],\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eradius\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003E_2PI\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estroke\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n  \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F rendering-loop\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003ErequestAnimationFrame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"nb\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eclear\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eraf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eraf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nx\"\u003Eanimation\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003Emousemove\u003C\u002Fspan\u003E\u003Cspan class=\"dl\"\u003E'\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F compute coordinate into canvas\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etarget\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EgetBoundingClientRect\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F Assume the following :\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F - mouseCircle refer a circle\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F - mouseCircle[0] means x position \u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F - mouseCircle[1] means y position \u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EmouseCircle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientX\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eleft\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"nx\"\u003EmouseCircle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EclientY\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ebb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Etop\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E});\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n    \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewbox=\"0 0 448 512\" class=\"highlight-action highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\n    \u003Cpath fill=\"#fff\" d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\u003E\u003C\u002Fpath\u003E\n\u003C\u002Fsvg\u003E\n\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\n\n\n\u003Cp\u003EEncore une fois, cela se traduit par une \u003Cstrong\u003Es√©paration de la logique business et la logique de rendu\u003C\u002Fstrong\u003E. Dans notre listener, on met seulement √† jour la position de notre cercle (logique business), et on laisse notre boucle de rendu s'occuper du reste. Automatiquement, lorsqu'elle effectuera son rendu, elle dessinera \u003Ccode\u003EmouseCircle\u003C\u002Fcode\u003E avec ses nouvelles coordonn√©es.\u003C\u002Fp\u003E\n\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--uRd6oRCA--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F75hkmbx2kubouu57dfcc.gif\" class=\"article-body-image-wrapper\"\u003E\u003Cimg src=\"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--uRd6oRCA--\u002Fc_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F75hkmbx2kubouu57dfcc.gif\" alt=\"Exemple d'une animation utilisant requestAnimationFrame et supportant le d√©placement de souris\" loading=\"lazy\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"conclusion\" href=\"#conclusion\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Conclusion\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003ECr√©er une animation basique est assez intuitif. N√©anmoins, il existe quelques r√®gles permettant de d√©velopper plus facilement et √©viter des probl√®mes de performances ou de maintenabilit√©.\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\u003Cli\u003ECr√©er une \u003Cstrong\u003Em√©thode de rendu\u003C\u002Fstrong\u003E et une \u003Cstrong\u003Eboucle de rendu\u003C\u002Fstrong\u003E afin de faciliter le cycle de vie de vos animations.\u003C\u002Fli\u003E\n\u003Cli\u003ELa m√©thode de rendu \u003Cstrong\u003Ed√©crit\u003C\u002Fstrong\u003E comment g√©rer \u003Cstrong\u003El'apparence\u003C\u002Fstrong\u003E de mes objets √† afficher\u003C\u002Fli\u003E\n\u003Cli\u003ELa boucle de rendu \u003Cstrong\u003Eplanifie l'affichage\u003C\u002Fstrong\u003E de mes objets, elle d√©cide quand invoquer la m√©thode de rendu.\u003C\u002Fli\u003E\n\u003Cli\u003ELa m√©thode de rendu a pour vocation de d√©crire comment afficher vos objets. Si l'utilisateur peut interagir avec l'animation, \u003Cstrong\u003E√©viter au maximum de modifier vos objets √† l'int√©rieur de celle-ci\u003C\u002Fstrong\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EImpl√©menter une boucle de rendu avec \u003Ccode\u003EsetInterval\u003C\u002Fcode\u003E pr√©sente de nombreux d√©fauts : taux de rafra√Æchissement non adaptatif, drift, mauvaise gestion parfois chaotiques des intervalles en arri√®re-plan par le navigateur, fuites m√©moires car on oublie 9 fois sur 10 de r√©cup√©rer l'\u003Ccode\u003EintervalId\u003C\u002Fcode\u003E retourn√© par \u003Ccode\u003EsetInterval\u003C\u002Fcode\u003E (avouons-le üòá), etc.\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cstrong\u003EIl est recommand√© d'utiliser les requestAnimationFrame\u003C\u002Fstrong\u003E. Les navigateurs g√®rent les demandes de rendu selon leur besoin et s'adaptent au contexte d'ex√©cution.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Ch1\u003E\n  \u003Ca name=\"le-mot-de-la-fin\" href=\"#le-mot-de-la-fin\" class=\"anchor\"\u003E\n  \u003C\u002Fa\u003E\n  Le mot de la fin\n\u003C\u002Fh1\u003E\n\n\u003Cp\u003ECeci cl√¥ture mon deuxi√®me tutoriel sur le JavaScript üòÅ. N'h√©sitez pas √† poster dans les commentaires vos exp√©riences avec les animations en JavaScript ! \u003C\u002Fp\u003E\n\n";b.body_markdown="Dans cet article, nous allons comparer plusieurs m√©thodes permettant de faire des animations en JavaScript.\n\n# L'approche intuitive\nUne animation, ce n'est qu'une succession d'images dans le temps. De fait, pour cr√©er une animation, il suffit d'effectuer un rendu √† intervalle r√©gulier. Facile, non ? üòÑ\n\nSi toutefois un exemple √©tait n√©cessaire, animons sans attendre la sc√®ne suivante : un cercle blanc se d√©pla√ßant horizontalement dans un canvas.\n\n```javascript\nconst canvas = document.querySelector('canvas');\nconst _2PI = 2 * Math.PI;\n \n \nfunction setupCanvas(canvasElement) {\n    canvasElement.width = window.innerWidth;\n    canvasElement.style.width = window.innerWidth + 'px';\n \n    canvasElement.height = window.innerHeight;\n    canvasElement.style.height = window.innerHeight + 'px';\n \n    const ctx = canvasElement.getContext('2d');\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';\n    ctx.lineWidth = 1;\n \n    ctx.fillStyle = 'rgb(255,255,255)';\n \n    return ctx;\n}\n \nconst context = setupCanvas(canvas);\n \n \nvar x = 50;\nvar y = 50;\n \nvar duration = 4000;\n\u002F\u002F Rendering loop interval\nsetInterval(function() {\n    \u002F\u002F logic of our animation\n    window.clear();\n    var now = Date.now();\n \n    x = ((now % duration) \u002F duration * canvas.width);\n \n    \u002F\u002F draw circle\n    context.beginPath();\n    context.arc(x, y, 30, 0, _2PI);\n    context.closePath();\n    context.fill();\n    context.stroke();\n}, 16);\n```\n\n**R√©sultat :**\n\n![Alt Text](https:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002Fxt0kyiu03lewvksmw5h8.gif)\n\n\nNotez qu'une telle animation aurait tr√®s bien pu √™tre r√©alis√©e en HTML\u002FCSS, et qu'une impl√©mentation reposant sur un canvas peut s'apparenter - selon certains - √† atomiser une mouche avec un bazooka üí£\n\nToutefois, puisque nous allons complexifier nos animations dans la suite de l'article, autant partir sur de bonnes bases !\n\n\n# La boucle de rendu\n\nAvant de g√©rer des animations plus complexes, il semble opportun d'introduire un concept cl√© : la **boucle de rendu** ou rendering loop.\n\nIl s'agit d'un m√©canisme utilis√©e pour *rendre* notre animation, similaire √† la *boucle de jeu* dans le contexte des jeux-vid√©o.\n\nPour gagner en lisibilit√©, nous allons isoler la logique propre au rendu de l'animation dans une m√©thode nomm√©e `render`.\n\n```javascript \nfunction render() {\n \u002F\u002F logic of our animation\n    window.clear();\n    var now = Date.now();\n \n    x = ((now % duration) \u002F duration * canvas.width);\n \n    \u002F\u002F draw circle\n    context.beginPath();\n    context.arc(x, y, 30, 0, _2PI);\n    context.closePath();\n    context.fill();\n    context.stroke();\n}\n\n\u002F\u002F rendering loop\nsetInterval(render, 16);\n```\n\nCette modification para√Æt anodine, pourtant nous venons de faire un pas de g√©ant ! üöÄ\n\nNous disposons d√©sormais d'une **m√©thode de rendu** `render` invoqu√©e en boucle, ou pour √™tre plus formel, d'une boucle de rendu.\n\n## Boucle de rendu, m√©thode de rendu, quelle diff√©rence ?\n\nLes deux entit√©s sont tr√®s li√©es, mais se diff√©rencient par la nature de leur pr√©occupation :\n\n* La **m√©thode de rendu** contient la logique propre au rendu de nos objets. Elle r√©pond √† la question : \"Comment g√©rer l'apparence mes objets ?\".\n\n* La **boucle de rendu** contient la logique propre au s√©quen√ßage des rendus. Elle r√©pond √† la question : \"Comment planifier l'affichage de mes objets ?\"\n\nNous le verrons, chacun de ses deux aspects nous expose √† des probl√©matiques diff√©rentes üëç.\n\n# G√©rer le cycle de rendu\n\nUne fa√ßon de mesurer les performances d'une animation consiste √† analyser son **frame rate**. Le frame rate se mesure en *FPS* (Frame Per Seconds) et repr√©sente nombre d'images que notre animation affiche par seconde.\n\nPour consid√©rer qu'une animation est fluide, nous consid√©rerons que :\n* **Le frame rate doit id√©alement se situer autour des 60 FPS** (soit une image toutes les 16 ms).\n* **Le frame rate doit √™tre stable** pour que l'impression de mouvement soit coh√©rente. Une variation soudaine peut entra√Æner une sensation de ralentissement ou de saccade. Passer subitement de 60 fps √†  30 fps provoquera un ressentit g√©n√©ralement plus d√©sagr√©able qu'une animation constante √† 30 fps, bien que son score moyen de fps soit presque 2x plus grand !\n\nEn r√©alit√©, le probl√®me est beaucoup plus complexe ! J'ai volontairement simplifi√© pour les besoins de l'article, mais si vous souhaitez en savoir plus sur l'impression de mouvement et le traitement des images, je ne peux que vous recommander cet excellent article ü§ì : [the-illusion-of-motion](https:\u002F\u002Fpaulbakaus.com\u002Ftutorials\u002Fperformance\u002Fthe-illusion-of-motion\u002F)\n\nVoici les modifications √† apporter √† notre code pour calculer le frame rate :\n\n```javascript\nlet nbRender = 0;\n\n\u002F\u002F every seconds prompt frame-rate, then reset counter\nsetInterval(function() {\n    console.log('fps:' + nbRender);\n    nbRender = 0;\n}, 1000);\n \n\u002F\u002F Rendering loop interval\nsetInterval(function() {\n  nbRender++;\n  render();\n}, 16);\n```\n\nNotez combien la modification est simple. Gr√¢ce au d√©couplage du code via la m√©thode de rendu, la logique propre au rendu de nos objets n'a pas √©t√© impact√©e üßê.\n\nEn rejouant notre script, on constate que l'animation tourne autour de 60FPS. Si l‚Äôon diminue le d√©lai de notre intervalle (de 16ms √† 10 ms par exemple), la boucle de rendu sera plus souvent √©valu√©e, et l'on obtiendra un frame rate plus √©lev√©e‚Ä¶\n\nEnfin, en th√©orie !\n\n\n\n# Limitation des m√©thodes de rendues reposant sur un intervalle\n\nAttention : tous les navigateurs ne se valent pas. La fa√ßon dont ils g√®rent les intervalles peut varier. Google Chrome notamment tire son √©pingle du jeu et minimise l'impact des limitations list√©es ci-apr√®s.\n\n\n## Intervalles non r√©guliers et drift\n\n\nRien ne garantit que le d√©lai renseign√© un `setInterval` sera scrupuleusement respect√©. Ce temps ne correspond pas √† \"dans combien de temps le callback sera ex√©cut√©\", mais √† la dur√©e minimale avant que celui-ci soit invoqu√©.\n\nSurpris ? Pourtant, rien de plus logique ! Les navigateurs ex√©cutant le code JS en mono-thread, si le moteur JS est d√©j√† occup√© au moment traiter le code contenu dans notre intervalle, il nous faudra attendre qu'il termine sa t√¢che actuelle avant de s'int√©resser √† notre intervalle.\n\n√Ä chaque it√©ration, notre intervalle peut accumuler du retard. Si bien qu'un intervalle initialis√© au temps 0ms avec 100ms de d√©lais entre chaque it√©ration, pourrait avoir lieu au temps 100...548 ms !\n\nC'est ce d√©phasage que l'on d√©signe par \"drift\".\n\nDans le cadre d'une animation, selon la charge de l'application web, on peut \"perdre des frames\" en cours de route. Cela peut √™tre g√™nant si notre boucle de rendu impl√©mente une partie de la logique m√©tier de l'application.\n\nCet article d√©taille comment les timers JavaScript fonctionnent, et pourquoi ils ne sont pas fiables : [how-javascript-timers-work](https:\u002F\u002Fjohnresig.com\u002Fblog\u002Fhow-javascript-timers-work).\n\n## Des probl√®mes de performances historiques\n\nIl y a encore quelques ann√©es il existait une diff√©rence palpable entre les performances d'une animation reposant sur `setInterval` ou sur les `requestAnimationFrame`.\n\nJe ne prends m√™me pas la peine de vous proposer de lien vers un article. Il y en a des centaines. La plupart sont tr√®s bien d√©taill√©s.\n\n‚ö†Ô∏è De nos jours cet √©cart a tendance √† s'estomper. √Ä l'heure o√π j'√©cris cet article, je n'ai pas r√©ussi √† mesurer de diff√©rence significative entre les deux m√©thodes.\n\n\n# La m√©thode window.requestAnimationFrame\n\nAfin de contourner tous ces probl√®mes, les navigateurs impl√©mentent une m√©thode nomm√©e `requestAnimationFrame` (parfois abr√©g√©e rAF).\n\nPlut√¥t que de planifier des rendus √† intervalle r√©gulier, nous d√©l√©guons cette responsabilit√© au navigateur. D'un coup d'un seul, nous nous d√©barrassons des probl√®mes li√©s √† la **logique propre au s√©quen√ßage des rendus**.\n\nParmi les services rendus par les requestAnimationFrame, on peut noter :\n\n* Elles adaptent le frame rate en fonction de l'√©cran de l'utilisateur. Apr√®s tout, pourquoi s'acharner √† calculer 60 images par seconde si notre installation n'est capable d'en afficher que 50 ?\n\n* La boucle de rendu s'arr√™te d√®s que la page n'est plus visible (changement d'onglet, passage en arri√®re-plan, etc). Cela √©vite une consommation inutile de ressources et pr√©serve la batterie des appareils mobiles.\n\n* Elles ne reposent pas sur un syst√®me de timer, nous ne rencontrons donc pas de probl√®me de drift.\n\n* Les images sont calcul√©es les unes √† la suite des autres, on √©vite de tomber dans un goulot d'√©tranglement.\n\n\nSans plus attendre, voyons comment modifier notre boucle de rendu pour utiliser les requestAnimationFrame :\n\n\n```javascript\nfunction renderingLoop () {\n  nbRender++;\n  render();\n \n  \u002F\u002F ask a new rendering\n  window.requestAnimationFrame(renderingLoop);\n});\n \nwindow.requestAnimationFrame(renderingLoop);\n```\n\nC'est tout ? Oui üòå.\n\nNotez (une fois de plus !) que les modifications auraient √©t√©s bien plus complexes si nous n'avions pas pris la peine de s√©parer la **boucle de rendu** et **la m√©thode de rendu** en deux entit√©s distinctes.\n\n\n# Interagir avec une animation\n\n\nUne bonne animation, √ßa peut √™tre chouette. Mais, une animation avec laquelle on peut interagir, c'est carr√©ment mieux !\n\n## Mettre en pause \u002F reprendre une animation\n\nIl suffit d'introduire un boolean `isPlaying` indiquant si un rendu doit √™tre effectu√© ou non. Ce n'est pas bien sorcier, toutefois une subtilit√© requiert votre attention. Je vois bien souvent des impl√©mentations comme :\n\n```javascript\nvar animation = function() {\n    window.requestAnimationFrame(animation);\n    if (animation.isPlaying !== false) {\n         render();\n    }\n}\n```\n\nou si on utilise des intervalles :\n\n```javascript\nsetInterval(function() {\n    if (isPlaying === true) {\n        render();\n    }\n}, 16);\n```\n\nSoyez vigilant : suspendre le rendu ne signifie pas interrompre la boucle de rendu. Votre application cessera certes de calculer de nouvelles frames, mais votre boucle de rendu continuera √† tourner dans le vide.\n\nCe n'est pas tr√®s √©l√©gant, et cela peut parfois vous jouer des tours.\n\nVoici comment interrompre proprement la boucle de rendu : \n\n```javascript\nvar animation = function() {\n    if (animation.isPlaying !== false) {\n        window.requestAnimationFrame(animation);\n        render();\n    }\n};\n \nanimation.pause = function() {\n    animation.isPlaying = false;\n};\n \nanimation.play = function() {\n    animation.isPlaying = true;\n    window.requestAnimationFrame(animation);\n}\n\n\n \nvar animationIntervalId = null;\n \nfunction play() {\n    if (animationIntervalId === null) {\n        animationIntervalId = setInterval(function() {\n           render();\n    }, 16);\n    }\n}\n \nfunction pause() {\n    if (animationIntervalId !== null) {\n        clearInterval(animationIntervalId);\n        animationIntervalId = null;\n    }\n}\n```\n\n## Interagir avec la souris (ou le clavier)\n\nSoit l'animation suivante :\n*(Adapt√©e pour les besoins depuis [le benchmark de @nukadelic](https:\u002F\u002Fcodepen.io\u002Fnukadelic\u002Fpen\u002FQgQJeK))*\n\n\nOn ne va pas rentrer dans le d√©tail de son impl√©mentation. Pour les curieux, jetez un coup d'≈ìil sur le [repository git](https:\u002F\u002Fgithub.com\u002Fqphilippot\u002Ftuto\u002Ftree\u002Fmaster\u002Fmake-your-own-animation-js).\n\n![Alt Text](https:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F5uxfavmdfxy47d24vm4d.gif)\n\nNous souhaitons modifier son comportement afin de faire appara√Ætre un cercle rouge √† l'emplacement de la souris. Si le curseur bouge, le cercle se d√©placera en cons√©quence.\n\n```javascript\n\u002F\u002F Attention : √† ne surtout pas faire !\ndocument.addEventListener('mousemove', function(event) {\n    render(context);\n\n    \u002F\u002F compute coordinate into canvas\n    var bb = event.target.getBoundingClientRect();\n    var x = event.clientX - bb.left;\n    var y = event.clientY - bb.top;\n \n    context.fillStyle = \"rgba(255,0,0,0.5)\"\n    context.beginPath();\n    context.arc(x,y, 10 ,0,6.283185,0,true);\n    context.fill();\n});\n```\n\nHorreur, nos FPS baissent drastiquement ! Tr√®s vite, la page a crash√©e. Je n'ai m√™me pas pu prendre un gif pour illustrer la situation üò¢.\n\n\n## Analyse du probl√®me\n\n### Une indigestion d'√©v√©nements \n\nChaque d√©placement du curseur lance un √©v√©nement `mousemove`, et appelle `render()`. \n\nL'ennui c'est qu'en d√©pla√ßant physiquement votre souris, ce n'est pas un, mais plusieurs centaines d'√©v√©nements qui sont lanc√©s en quelques secondes, et autant de demandes de rendus ! ü§Ø\n \nUne machine id√©ale - disposant d'une capacit√© de calcul et des ressources m√©moire infinies - r√©sisterait √† une telle charge de travail. L'animation serait alors d'une fluidit√© exemplaire. Le frame-rate atteindrait un pic √©quivalent √† plusieurs centaines de FPS.\n\nEn pratique, aucun navigateur n'est capable de suivre la cadence.\n\nLe probl√®me d√©passe le simple cadre des animations : plus le callback associ√© √† un √©v√©nement fr√©quent est complexe, plus l'exp√©rience utilisateur est d√©grad√©e. \n\n\n### L'Event Loop.\n\n\u003E **La gestion des √©v√©nements JavaScript est en mono-thread.**\n\nQuand un utilisateur d√©place son curseur, les `mousemove` sont mis dans une file d'attente et trait√© un par un. Dans le cas d'une animation, plusieurs centaines de rendus sont mis en attente.\n\nSi vous souhaitez en apprendre davantage sur l'Event Loop, je recommande cet article : [https:\u002F\u002Ffelixgerschau.com\u002Fjavascript-event-loop-call-stack](https:\u002F\u002Ffelixgerschau.com\u002Fjavascript-event-loop-call-stack)\n\n*¬´ Et alors ? Si JavaScript est mono-thread, et qu'il effectue mes rendus un par un, tout devrait fonctionner correctement. Je ne vois pas o√π est le probl√®me ! ¬ª*\n\nSupposons que chaque frame requiert 20 ms pour √™tre affich√©e. Puisque le rendu est s√©quentiel, si d√©placer le curseur jette 1000 √©v√©nements `mousemove`, le script commandera le calcul de 1000 frames.\n\nLe programme consacra donc 20 secondes pour retranscrire un mouvement de souris ayant pourtant dur√© moins d'une seconde ! ‚ò†Ô∏è\n\nLe fait que l'ex√©cution du JS soit en mono-thread ne signifie pas qu'il √©volue dans un thread d√©di√©. Loin de l√† !\n\nLe processus responsable de notre JS s'occupe aussi de la r√©activit√© de la page. Noyer le processus (main-thread) aboutira √† une exp√©rience utilisateur d√©grad√©e (le plantage pur et simple de votre page n'est pas exclu).\n[https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FGlossary\u002FMain_thread](https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FGlossary\u002FMain_thread)\n\nDe fa√ßon g√©n√©rale, d√®s que le temps de rendu est sup√©rieur √† la dur√©e de vie de votre frame, votre animation en p√¢tit. Au mieux elle  saccade (le moteur de rendu \"sacrifie\" des demandes de rendu). \n\nDans le pire des cas l'animation est d√©synchronis√©e, car toutes les demandes de rendu sont ex√©cut√©es. Les interactions de l'utilisateur sont rendues avec un d√©calage d√ª au temps de calcul √©lev√©. Une autre possibilit√© est un m√©lange des deux √† coup de grand \"freeze\" d'√©cran. Rien de bien souhaitable !\n\n## Solution\nLors d'une interaction provenant de l'utilisateur, modifiez seulement l'√©tat de vos objets. N'effectuez surtout pas de rendu. C'est le job de la boucle de rendu, et elle le fait tr√®s bien.\n\nDans cet exemple \"modifier l'√©tat de l'objet\" signifier simplement rafra√Æchir les coordonn√©es du cercle. \n\n```javascript\n\u002F\u002F rendering method \nfunction render(context) {\n   var radius= 25;\n   \u002F\u002F only draws circles with something like that:\n   for (var i = 0; i \u003C circles.length; ++i) {\n    context.beginPath();\n    context.arc(circle[0], circle[1], radius, 0, _2PI);\n    context.fill();\n    context.stroke();\n  }\n}\n \n\u002F\u002F rendering-loop\nvar animation = function() {\n    window.requestAnimationFrame(animation);\n \n    window.clear(raf);\n    render(raf.context);\n}\n \nanimation();\n \ndocument.addEventListener('mousemove', function(event) {\n    \u002F\u002F compute coordinate into canvas\n    var bb = event.target.getBoundingClientRect();\n    \u002F\u002F Assume the following :\n    \u002F\u002F - mouseCircle refer a circle\n    \u002F\u002F - mouseCircle[0] means x position \n    \u002F\u002F - mouseCircle[1] means y position \n    mouseCircle[0] = event.clientX - bb.left;\n    mouseCircle[1] = event.clientY - bb.top;\n});\n```\n\nEncore une fois, cela se traduit par une **s√©paration de la logique business et la logique de rendu**. Dans notre listener, on met seulement √† jour la position de notre cercle (logique business), et on laisse notre boucle de rendu s'occuper du reste. Automatiquement, lorsqu'elle effectuera son rendu, elle dessinera `mouseCircle` avec ses nouvelles coordonn√©es.\n\n![Exemple d'une animation utilisant requestAnimationFrame et supportant le d√©placement de souris](https:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fi\u002F75hkmbx2kubouu57dfcc.gif)\n\n# Conclusion\n\nCr√©er une animation basique est assez intuitif. N√©anmoins, il existe quelques r√®gles permettant de d√©velopper plus facilement et √©viter des probl√®mes de performances ou de maintenabilit√©.\n* Cr√©er une **m√©thode de rendu** et une **boucle de rendu** afin de faciliter le cycle de vie de vos animations.\n* La m√©thode de rendu **d√©crit** comment g√©rer **l'apparence** de mes objets √† afficher\n* La boucle de rendu **planifie l'affichage** de mes objets, elle d√©cide quand invoquer la m√©thode de rendu.\n* La m√©thode de rendu a pour vocation de d√©crire comment afficher vos objets. Si l'utilisateur peut interagir avec l'animation, **√©viter au maximum de modifier vos objets √† l'int√©rieur de celle-ci**.\n* Impl√©menter une boucle de rendu avec `setInterval` pr√©sente de nombreux d√©fauts : taux de rafra√Æchissement non adaptatif, drift, mauvaise gestion parfois chaotiques des intervalles en arri√®re-plan par le navigateur, fuites m√©moires car on oublie 9 fois sur 10 de r√©cup√©rer l'`intervalId` retourn√© par `setInterval` (avouons-le üòá), etc.\n* **Il est recommand√© d'utiliser les requestAnimationFrame**. Les navigateurs g√®rent les demandes de rendu selon leur besoin et s'adaptent au contexte d'ex√©cution.\n\n\n# Le mot de la fin\n\nCeci cl√¥ture mon deuxi√®me tutoriel sur le JavaScript üòÅ. N'h√©sitez pas √† poster dans les commentaires vos exp√©riences avec les animations en JavaScript ! \n\n";b.user={name:"Quentin Philippot",username:f,twitter_username:a,github_username:f,website_url:"https:\u002F\u002Fs3.eu-west-3.amazonaws.com\u002Fqphilippot-cv\u002Findex.html",profile_image:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--23nBYvgp--\u002Fc_fill,f_auto,fl_progressive,h_640,q_auto,w_640\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F470949\u002F2b545f75-d39e-443f-8264-484888d7954d.jpeg",profile_image_90:"https:\u002F\u002Fres.cloudinary.com\u002Fpracticaldev\u002Fimage\u002Ffetch\u002Fs--8iHqBsBG--\u002Fc_fill,f_auto,fl_progressive,h_90,q_auto,w_90\u002Fhttps:\u002F\u002Fdev-to-uploads.s3.amazonaws.com\u002Fuploads\u002Fuser\u002Fprofile_image\u002F470949\u002F2b545f75-d39e-443f-8264-484888d7954d.jpeg"};return {data:[{}],fetch:{"data-v-25febe66:0":{article:b}},mutations:[["SET_CURRENT_ARTICLE",b]]}}(null,{},"https:\u002F\u002Fdev.to\u002Fqphilippot\u002Ffaites-vos-propres-animations-en-js-34ok",9,"2020-11-11T10:06:25Z","qphilippot")));